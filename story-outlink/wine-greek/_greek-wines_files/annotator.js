!function t(e,n,r){var i="function"==typeof hypothesisRequire&&hypothesisRequire;function o(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof hypothesisRequire&&hypothesisRequire;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};e[s][0].call(c.exports,(function(t){var n=e[s][1][t];return o(n||t)}),c,c.exports,t,e,n,r)}return n[s].exports}for(var s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,n){function r(t){return!0}e.exports=function(t,e){var n=[];e=e||r;do{n.push(t),t=t.parentNode}while(t&&t.tagName&&e(t));return n.slice(1)}},{}],2:[function(t,e,n){
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";var t={}.hasOwnProperty;function n(){for(var e=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var o=typeof i;if("string"===o||"number"===o)e.push(i);else if(Array.isArray(i)&&i.length){var s=n.apply(null,i);s&&e.push(s)}else if("object"===o)for(var a in i)t.call(i,a)&&i[a]&&e.push(a)}}return e.join(" ")}void 0!==e&&e.exports?(n.default=n,e.exports=n):"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],(function(){return n})):window.classNames=n}()},{}],3:[function(t,e,n){(function(t){var n=t.CustomEvent;e.exports=function(){try{var t=new n("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?n:"undefined"!=typeof document&&"function"==typeof document.createEvent?function(t,e){var n=document.createEvent("CustomEvent");return e?n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail):n.initCustomEvent(t,!1,!1,void 0),n}:function(t,e){var n=document.createEventObject();return n.type=t,e?(n.bubbles=Boolean(e.bubbles),n.cancelable=Boolean(e.cancelable),n.detail=e.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(this,window)},{}],4:[function(t,e,n){function r(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}r.Diff,r.prototype.diff_main=function(t,e,n,r){void 0===r&&(r=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var i=r;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[0,t]]:[];void 0===n&&(n=!0);var o=n,s=this.diff_commonPrefix(t,e),a=t.substring(0,s);t=t.substring(s),e=e.substring(s),s=this.diff_commonSuffix(t,e);var u=t.substring(t.length-s);t=t.substring(0,t.length-s),e=e.substring(0,e.length-s);var l=this.diff_compute_(t,e,o,i);return a&&l.unshift([0,a]),u&&l.push([0,u]),this.diff_cleanupMerge(l),l},r.prototype.diff_compute_=function(t,e,n,r){var i;if(!t)return[[1,e]];if(!e)return[[-1,t]];var o=t.length>e.length?t:e,s=t.length>e.length?e:t,a=o.indexOf(s);if(-1!=a)return i=[[1,o.substring(0,a)],[0,s],[1,o.substring(a+s.length)]],t.length>e.length&&(i[0][0]=i[2][0]=-1),i;if(1==s.length)return[[-1,t],[1,e]];var u=this.diff_halfMatch_(t,e);if(u){var l=u[0],c=u[1],h=u[2],f=u[3],p=u[4],d=this.diff_main(l,h,n,r),g=this.diff_main(c,f,n,r);return d.concat([[0,p]],g)}return n&&t.length>100&&e.length>100?this.diff_lineMode_(t,e,r):this.diff_bisect_(t,e,r)},r.prototype.diff_lineMode_=function(t,e,n){t=(c=this.diff_linesToChars_(t,e)).chars1,e=c.chars2;var r=c.lineArray,i=this.diff_main(t,e,!1,n);this.diff_charsToLines_(i,r),this.diff_cleanupSemantic(i),i.push([0,""]);for(var o=0,s=0,a=0,u="",l="";o<i.length;){switch(i[o][0]){case 1:a++,l+=i[o][1];break;case-1:s++,u+=i[o][1];break;case 0:if(s>=1&&a>=1){i.splice(o-s-a,s+a),o=o-s-a;for(var c,h=(c=this.diff_main(u,l,!1,n)).length-1;h>=0;h--)i.splice(o,0,c[h]);o+=c.length}a=0,s=0,u="",l=""}o++}return i.pop(),i},r.prototype.diff_bisect_=function(t,e,n){for(var r=t.length,i=e.length,o=Math.ceil((r+i)/2),s=o,a=2*o,u=new Array(a),l=new Array(a),c=0;c<a;c++)u[c]=-1,l[c]=-1;u[s+1]=0,l[s+1]=0;for(var h=r-i,f=h%2!=0,p=0,d=0,g=0,m=0,v=0;v<o&&!((new Date).getTime()>n);v++){for(var y=-v+p;y<=v-d;y+=2){for(var b=s+y,_=(C=y==-v||y!=v&&u[b-1]<u[b+1]?u[b+1]:u[b-1]+1)-y;C<r&&_<i&&t.charAt(C)==e.charAt(_);)C++,_++;if(u[b]=C,C>r)d+=2;else if(_>i)p+=2;else if(f&&(E=s+h-y)>=0&&E<a&&-1!=l[E]&&C>=(x=r-l[E]))return this.diff_bisectSplit_(t,e,C,_,n)}for(var w=-v+g;w<=v-m;w+=2){for(var x,E=s+w,T=(x=w==-v||w!=v&&l[E-1]<l[E+1]?l[E+1]:l[E-1]+1)-w;x<r&&T<i&&t.charAt(r-x-1)==e.charAt(i-T-1);)x++,T++;if(l[E]=x,x>r)m+=2;else if(T>i)g+=2;else if(!f){var C;if((b=s+h-w)>=0&&b<a&&-1!=u[b])if(_=s+(C=u[b])-b,C>=(x=r-x))return this.diff_bisectSplit_(t,e,C,_,n)}}}return[[-1,t],[1,e]]},r.prototype.diff_bisectSplit_=function(t,e,n,r,i){var o=t.substring(0,n),s=e.substring(0,r),a=t.substring(n),u=e.substring(r),l=this.diff_main(o,s,!1,i),c=this.diff_main(a,u,!1,i);return l.concat(c)},r.prototype.diff_linesToChars_=function(t,e){var n=[],r={};function i(t){for(var e="",i=0,o=-1,s=n.length;o<t.length-1;){-1==(o=t.indexOf("\n",i))&&(o=t.length-1);var a=t.substring(i,o+1);i=o+1,(r.hasOwnProperty?r.hasOwnProperty(a):void 0!==r[a])?e+=String.fromCharCode(r[a]):(e+=String.fromCharCode(s),r[a]=s,n[s++]=a)}return e}return n[0]="",{chars1:i(t),chars2:i(e),lineArray:n}},r.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var r=t[n][1],i=[],o=0;o<r.length;o++)i[o]=e[r.charCodeAt(o)];t[n][1]=i.join("")}},r.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,o=0;n<i;)t.substring(o,i)==e.substring(o,i)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return i},r.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,o=0;n<i;)t.substring(t.length-i,t.length-o)==e.substring(e.length-i,e.length-o)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return i},r.prototype.diff_commonOverlap_=function(t,e){var n=t.length,r=e.length;if(0==n||0==r)return 0;n>r?t=t.substring(n-r):n<r&&(e=e.substring(0,n));var i=Math.min(n,r);if(t==e)return i;for(var o=0,s=1;;){var a=t.substring(i-s),u=e.indexOf(a);if(-1==u)return o;s+=u,0!=u&&t.substring(i-s)!=e.substring(0,s)||(o=s,s++)}},r.prototype.diff_halfMatch_=function(t,e){if(this.Diff_Timeout<=0)return null;var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(n.length<4||2*r.length<n.length)return null;var i=this;function o(t,e,n){for(var r,o,s,a,u=t.substring(n,n+Math.floor(t.length/4)),l=-1,c="";-1!=(l=e.indexOf(u,l+1));){var h=i.diff_commonPrefix(t.substring(n),e.substring(l)),f=i.diff_commonSuffix(t.substring(0,n),e.substring(0,l));c.length<f+h&&(c=e.substring(l-f,l)+e.substring(l,l+h),r=t.substring(0,n-f),o=t.substring(n+h),s=e.substring(0,l-f),a=e.substring(l+h))}return 2*c.length>=t.length?[r,o,s,a,c]:null}var s,a,u,l,c,h=o(n,r,Math.ceil(n.length/4)),f=o(n,r,Math.ceil(n.length/2));return h||f?(s=f?h&&h[4].length>f[4].length?h:f:h,t.length>e.length?(a=s[0],u=s[1],l=s[2],c=s[3]):(l=s[0],c=s[1],a=s[2],u=s[3]),[a,u,l,c,s[4]]):null},r.prototype.diff_cleanupSemantic=function(t){for(var e=!1,n=[],r=0,i=null,o=0,s=0,a=0,u=0,l=0;o<t.length;)0==t[o][0]?(n[r++]=o,s=u,a=l,u=0,l=0,i=t[o][1]):(1==t[o][0]?u+=t[o][1].length:l+=t[o][1].length,i&&i.length<=Math.max(s,a)&&i.length<=Math.max(u,l)&&(t.splice(n[r-1],0,[-1,i]),t[n[r-1]+1][0]=1,r--,o=--r>0?n[r-1]:-1,s=0,a=0,u=0,l=0,i=null,e=!0)),o++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),o=1;o<t.length;){if(-1==t[o-1][0]&&1==t[o][0]){var c=t[o-1][1],h=t[o][1],f=this.diff_commonOverlap_(c,h),p=this.diff_commonOverlap_(h,c);f>=p?(f>=c.length/2||f>=h.length/2)&&(t.splice(o,0,[0,h.substring(0,f)]),t[o-1][1]=c.substring(0,c.length-f),t[o+1][1]=h.substring(f),o++):(p>=c.length/2||p>=h.length/2)&&(t.splice(o,0,[0,c.substring(0,p)]),t[o-1][0]=1,t[o-1][1]=h.substring(0,h.length-p),t[o+1][0]=-1,t[o+1][1]=c.substring(p),o++),o++}o++}},r.prototype.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 6;var n=t.charAt(t.length-1),i=e.charAt(0),o=n.match(r.nonAlphaNumericRegex_),s=i.match(r.nonAlphaNumericRegex_),a=o&&n.match(r.whitespaceRegex_),u=s&&i.match(r.whitespaceRegex_),l=a&&n.match(r.linebreakRegex_),c=u&&i.match(r.linebreakRegex_),h=l&&t.match(r.blanklineEndRegex_),f=c&&e.match(r.blanklineStartRegex_);return h||f?5:l||c?4:o&&!a&&u?3:a||u?2:o||s?1:0}for(var n=1;n<t.length-1;){if(0==t[n-1][0]&&0==t[n+1][0]){var i=t[n-1][1],o=t[n][1],s=t[n+1][1],a=this.diff_commonSuffix(i,o);if(a){var u=o.substring(o.length-a);i=i.substring(0,i.length-a),o=u+o.substring(0,o.length-a),s=u+s}for(var l=i,c=o,h=s,f=e(i,o)+e(o,s);o.charAt(0)===s.charAt(0);){i+=o.charAt(0),o=o.substring(1)+s.charAt(0),s=s.substring(1);var p=e(i,o)+e(o,s);p>=f&&(f=p,l=i,c=o,h=s)}t[n-1][1]!=l&&(l?t[n-1][1]=l:(t.splice(n-1,1),n--),t[n][1]=c,h?t[n+1][1]=h:(t.splice(n+1,1),n--))}n++}},r.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,r.whitespaceRegex_=/\s/,r.linebreakRegex_=/[\r\n]/,r.blanklineEndRegex_=/\n\r?\n$/,r.blanklineStartRegex_=/^\r?\n\r?\n/,r.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,n=[],r=0,i=null,o=0,s=!1,a=!1,u=!1,l=!1;o<t.length;)0==t[o][0]?(t[o][1].length<this.Diff_EditCost&&(u||l)?(n[r++]=o,s=u,a=l,i=t[o][1]):(r=0,i=null),u=l=!1):(-1==t[o][0]?l=!0:u=!0,i&&(s&&a&&u&&l||i.length<this.Diff_EditCost/2&&s+a+u+l==3)&&(t.splice(n[r-1],0,[-1,i]),t[n[r-1]+1][0]=1,r--,i=null,s&&a?(u=l=!0,r=0):(o=--r>0?n[r-1]:-1,u=l=!1),e=!0)),o++;e&&this.diff_cleanupMerge(t)},r.prototype.diff_cleanupMerge=function(t){t.push([0,""]);for(var e,n=0,r=0,i=0,o="",s="";n<t.length;)switch(t[n][0]){case 1:i++,s+=t[n][1],n++;break;case-1:r++,o+=t[n][1],n++;break;case 0:r+i>1?(0!==r&&0!==i&&(0!==(e=this.diff_commonPrefix(s,o))&&(n-r-i>0&&0==t[n-r-i-1][0]?t[n-r-i-1][1]+=s.substring(0,e):(t.splice(0,0,[0,s.substring(0,e)]),n++),s=s.substring(e),o=o.substring(e)),0!==(e=this.diff_commonSuffix(s,o))&&(t[n][1]=s.substring(s.length-e)+t[n][1],s=s.substring(0,s.length-e),o=o.substring(0,o.length-e))),0===r?t.splice(n-i,r+i,[1,s]):0===i?t.splice(n-r,r+i,[-1,o]):t.splice(n-r-i,r+i,[-1,o],[1,s]),n=n-r-i+(r?1:0)+(i?1:0)+1):0!==n&&0==t[n-1][0]?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,i=0,r=0,o="",s=""}""===t[t.length-1][1]&&t.pop();var a=!1;for(n=1;n<t.length-1;)0==t[n-1][0]&&0==t[n+1][0]&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),a=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),a=!0)),n++;a&&this.diff_cleanupMerge(t)},r.prototype.diff_xIndex=function(t,e){var n,r=0,i=0,o=0,s=0;for(n=0;n<t.length&&(1!==t[n][0]&&(r+=t[n][1].length),-1!==t[n][0]&&(i+=t[n][1].length),!(r>e));n++)o=r,s=i;return t.length!=n&&-1===t[n][0]?s:s+(e-o)},r.prototype.diff_prettyHtml=function(t){for(var e=[],n=/&/g,r=/</g,i=/>/g,o=/\n/g,s=0;s<t.length;s++){var a=t[s][0],u=t[s][1].replace(n,"&amp;").replace(r,"&lt;").replace(i,"&gt;").replace(o,"&para;<br>");switch(a){case 1:e[s]='<ins style="background:#e6ffe6;">'+u+"</ins>";break;case-1:e[s]='<del style="background:#ffe6e6;">'+u+"</del>";break;case 0:e[s]="<span>"+u+"</span>"}}return e.join("")},r.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},r.prototype.diff_text2=function(t){for(var e=[],n=0;n<t.length;n++)-1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},r.prototype.diff_levenshtein=function(t){for(var e=0,n=0,r=0,i=0;i<t.length;i++){var o=t[i][0],s=t[i][1];switch(o){case 1:n+=s.length;break;case-1:r+=s.length;break;case 0:e+=Math.max(n,r),n=0,r=0}}return e+Math.max(n,r)},r.prototype.diff_toDelta=function(t){for(var e=[],n=0;n<t.length;n++)switch(t[n][0]){case 1:e[n]="+"+encodeURI(t[n][1]);break;case-1:e[n]="-"+t[n][1].length;break;case 0:e[n]="="+t[n][1].length}return e.join("\t").replace(/%20/g," ")},r.prototype.diff_fromDelta=function(t,e){for(var n=[],r=0,i=0,o=e.split(/\t/g),s=0;s<o.length;s++){var a=o[s].substring(1);switch(o[s].charAt(0)){case"+":try{n[r++]=[1,decodeURI(a)]}catch(t){throw new Error("Illegal escape in diff_fromDelta: "+a)}break;case"-":case"=":var u=parseInt(a,10);if(isNaN(u)||u<0)throw new Error("Invalid number in diff_fromDelta: "+a);var l=t.substring(i,i+=u);"="==o[s].charAt(0)?n[r++]=[0,l]:n[r++]=[-1,l];break;default:if(o[s])throw new Error("Invalid diff operation in diff_fromDelta: "+o[s])}}if(i!=t.length)throw new Error("Delta length ("+i+") does not equal source text length ("+t.length+").");return n},r.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1},r.prototype.match_bitap_=function(t,e,n){if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(e),i=this;function o(t,r){var o=t/e.length,s=Math.abs(n-r);return i.Match_Distance?o+s/i.Match_Distance:s?1:o}var s=this.Match_Threshold,a=t.indexOf(e,n);-1!=a&&(s=Math.min(o(0,a),s),-1!=(a=t.lastIndexOf(e,n+e.length))&&(s=Math.min(o(0,a),s)));var u,l,c=1<<e.length-1;a=-1;for(var h,f=e.length+t.length,p=0;p<e.length;p++){for(u=0,l=f;u<l;)o(p,n+l)<=s?u=l:f=l,l=Math.floor((f-u)/2+u);f=l;var d=Math.max(1,n-l+1),g=Math.min(n+l,t.length)+e.length,m=Array(g+2);m[g+1]=(1<<p)-1;for(var v=g;v>=d;v--){var y=r[t.charAt(v-1)];if(m[v]=0===p?(m[v+1]<<1|1)&y:(m[v+1]<<1|1)&y|(h[v+1]|h[v])<<1|1|h[v+1],m[v]&c){var b=o(p,v-1);if(b<=s){if(s=b,!((a=v-1)>n))break;d=Math.max(1,2*n-a)}}}if(o(p+1,n)>s)break;h=m}return a},r.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},r.prototype.patch_addContext_=function(t,e){if(0!=e.length){for(var n=e.substring(t.start2,t.start2+t.length1),r=0;e.indexOf(n)!=e.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,n=e.substring(t.start2-r,t.start2+t.length1+r);r+=this.Patch_Margin;var i=e.substring(t.start2-r,t.start2);i&&t.diffs.unshift([0,i]);var o=e.substring(t.start2+t.length1,t.start2+t.length1+r);o&&t.diffs.push([0,o]),t.start1-=i.length,t.start2-=i.length,t.length1+=i.length+o.length,t.length2+=i.length+o.length}},r.prototype.patch_make=function(t,e,n){var i,o;if("string"==typeof t&&"string"==typeof e&&void 0===n)i=t,(o=this.diff_main(i,e,!0)).length>2&&(this.diff_cleanupSemantic(o),this.diff_cleanupEfficiency(o));else if(t&&"object"==typeof t&&void 0===e&&void 0===n)o=t,i=this.diff_text1(o);else if("string"==typeof t&&e&&"object"==typeof e&&void 0===n)i=t,o=e;else{if("string"!=typeof t||"string"!=typeof e||!n||"object"!=typeof n)throw new Error("Unknown call format to patch_make.");i=t,o=n}if(0===o.length)return[];for(var s=[],a=new r.patch_obj,u=0,l=0,c=0,h=i,f=i,p=0;p<o.length;p++){var d=o[p][0],g=o[p][1];switch(u||0===d||(a.start1=l,a.start2=c),d){case 1:a.diffs[u++]=o[p],a.length2+=g.length,f=f.substring(0,c)+g+f.substring(c);break;case-1:a.length1+=g.length,a.diffs[u++]=o[p],f=f.substring(0,c)+f.substring(c+g.length);break;case 0:g.length<=2*this.Patch_Margin&&u&&o.length!=p+1?(a.diffs[u++]=o[p],a.length1+=g.length,a.length2+=g.length):g.length>=2*this.Patch_Margin&&u&&(this.patch_addContext_(a,h),s.push(a),a=new r.patch_obj,u=0,h=f,l=c)}1!==d&&(l+=g.length),-1!==d&&(c+=g.length)}return u&&(this.patch_addContext_(a,h),s.push(a)),s},r.prototype.patch_deepCopy=function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n],o=new r.patch_obj;o.diffs=[];for(var s=0;s<i.diffs.length;s++)o.diffs[s]=i.diffs[s].slice();o.start1=i.start1,o.start2=i.start2,o.length1=i.length1,o.length2=i.length2,e[n]=o}return e},r.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var n=this.patch_addPadding(t);e=n+e+n,this.patch_splitMax(t);for(var r=0,i=[],o=0;o<t.length;o++){var s,a,u=t[o].start2+r,l=this.diff_text1(t[o].diffs),c=-1;if(l.length>this.Match_MaxBits?-1!=(s=this.match_main(e,l.substring(0,this.Match_MaxBits),u))&&(-1==(c=this.match_main(e,l.substring(l.length-this.Match_MaxBits),u+l.length-this.Match_MaxBits))||s>=c)&&(s=-1):s=this.match_main(e,l,u),-1==s)i[o]=!1,r-=t[o].length2-t[o].length1;else if(i[o]=!0,r=s-u,l==(a=-1==c?e.substring(s,s+l.length):e.substring(s,c+this.Match_MaxBits)))e=e.substring(0,s)+this.diff_text2(t[o].diffs)+e.substring(s+l.length);else{var h=this.diff_main(l,a,!1);if(l.length>this.Match_MaxBits&&this.diff_levenshtein(h)/l.length>this.Patch_DeleteThreshold)i[o]=!1;else{this.diff_cleanupSemanticLossless(h);for(var f,p=0,d=0;d<t[o].diffs.length;d++){var g=t[o].diffs[d];0!==g[0]&&(f=this.diff_xIndex(h,p)),1===g[0]?e=e.substring(0,s+f)+g[1]+e.substring(s+f):-1===g[0]&&(e=e.substring(0,s+f)+e.substring(s+this.diff_xIndex(h,p+g[1].length))),-1!==g[0]&&(p+=g[1].length)}}}}return[e=e.substring(n.length,e.length-n.length),i]},r.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,n="",r=1;r<=e;r++)n+=String.fromCharCode(r);for(r=0;r<t.length;r++)t[r].start1+=e,t[r].start2+=e;var i=t[0],o=i.diffs;if(0==o.length||0!=o[0][0])o.unshift([0,n]),i.start1-=e,i.start2-=e,i.length1+=e,i.length2+=e;else if(e>o[0][1].length){var s=e-o[0][1].length;o[0][1]=n.substring(o[0][1].length)+o[0][1],i.start1-=s,i.start2-=s,i.length1+=s,i.length2+=s}return 0==(o=(i=t[t.length-1]).diffs).length||0!=o[o.length-1][0]?(o.push([0,n]),i.length1+=e,i.length2+=e):e>o[o.length-1][1].length&&(s=e-o[o.length-1][1].length,o[o.length-1][1]+=n.substring(0,s),i.length1+=s,i.length2+=s),n},r.prototype.patch_splitMax=function(t){for(var e=this.Match_MaxBits,n=0;n<t.length;n++)if(!(t[n].length1<=e)){var i=t[n];t.splice(n--,1);for(var o=i.start1,s=i.start2,a="";0!==i.diffs.length;){var u=new r.patch_obj,l=!0;for(u.start1=o-a.length,u.start2=s-a.length,""!==a&&(u.length1=u.length2=a.length,u.diffs.push([0,a]));0!==i.diffs.length&&u.length1<e-this.Patch_Margin;){var c=i.diffs[0][0],h=i.diffs[0][1];1===c?(u.length2+=h.length,s+=h.length,u.diffs.push(i.diffs.shift()),l=!1):-1===c&&1==u.diffs.length&&0==u.diffs[0][0]&&h.length>2*e?(u.length1+=h.length,o+=h.length,l=!1,u.diffs.push([c,h]),i.diffs.shift()):(h=h.substring(0,e-u.length1-this.Patch_Margin),u.length1+=h.length,o+=h.length,0===c?(u.length2+=h.length,s+=h.length):l=!1,u.diffs.push([c,h]),h==i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(h.length))}a=(a=this.diff_text2(u.diffs)).substring(a.length-this.Patch_Margin);var f=this.diff_text1(i.diffs).substring(0,this.Patch_Margin);""!==f&&(u.length1+=f.length,u.length2+=f.length,0!==u.diffs.length&&0===u.diffs[u.diffs.length-1][0]?u.diffs[u.diffs.length-1][1]+=f:u.diffs.push([0,f])),l||t.splice(++n,0,u)}}},r.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},r.prototype.patch_fromText=function(t){var e=[];if(!t)return e;for(var n=t.split("\n"),i=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<n.length;){var s=n[i].match(o);if(!s)throw new Error("Invalid patch string: "+n[i]);var a=new r.patch_obj;for(e.push(a),a.start1=parseInt(s[1],10),""===s[2]?(a.start1--,a.length1=1):"0"==s[2]?a.length1=0:(a.start1--,a.length1=parseInt(s[2],10)),a.start2=parseInt(s[3],10),""===s[4]?(a.start2--,a.length2=1):"0"==s[4]?a.length2=0:(a.start2--,a.length2=parseInt(s[4],10)),i++;i<n.length;){var u=n[i].charAt(0);try{var l=decodeURI(n[i].substring(1))}catch(t){throw new Error("Illegal escape in patch_fromText: "+l)}if("-"==u)a.diffs.push([-1,l]);else if("+"==u)a.diffs.push([1,l]);else if(" "==u)a.diffs.push([0,l]);else{if("@"==u)break;if(""!==u)throw new Error('Invalid patch mode "'+u+'" in: '+l)}i++}}return e},r.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},r.patch_obj.prototype.toString=function(){for(var t,e=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case 1:t="+";break;case-1:t="-";break;case 0:t=" "}e[n+1]=t+encodeURI(this.diffs[n][1])+"\n"}return e.join("").replace(/%20/g," ")},e.exports=r,e.exports.diff_match_patch=r,e.exports.DIFF_DELETE=-1,e.exports.DIFF_INSERT=1,e.exports.DIFF_EQUAL=0},{}],5:[function(t,e,n){e.exports=function(){var t=document.baseURI;if(!t)for(var e=document.getElementsByTagName("base"),n=0;n<e.length;n++)if(e[n].href){t=e[n].href;break}return t||document.documentURI}()},{}],6:[function(t,e,n){e.exports=t("./lib")},{"./lib":7}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.fromRange=function(t,e){if(void 0===t)throw new Error('missing required parameter "root"');if(void 0===e)throw new Error('missing required parameter "range"');var n=t.ownerDocument.createRange(),r=e.startContainer,i=e.startOffset;n.setStart(t,0),n.setEnd(r,i);var s=(0,o.default)(n).length;return{start:s,end:s+(0,o.default)(e).length}},n.toRange=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(void 0===t)throw new Error('missing required parameter "root"');var n=t.ownerDocument.createRange(),o=(0,r.default)(t,a),s=e.start||0,u=e.end||s,l=(0,i.default)(o,s),c=s-l;o.pointerBeforeReferenceNode?n.setStart(o.referenceNode,c):(n.setStart(o.nextNode(),c),o.previousNode());var h=u-s+c;return c=h-(l=(0,i.default)(o,h)),o.pointerBeforeReferenceNode?n.setEnd(o.referenceNode,c):n.setEnd(o.nextNode(),c),n};var r=s(t("dom-node-iterator")),i=s(t("dom-seek")),o=s(t("./range-to-string"));function s(t){return t&&t.__esModule?t:{default:t}}var a=4},{"./range-to-string":8,"dom-node-iterator":12,"dom-seek":21}],8:[function(t,e,n){"use strict";function r(t,e){if(!e&&t.firstChild)return t.firstChild;do{if(t.nextSibling)return t.nextSibling;t=t.parentNode}while(t);return t}function i(t,e){for(var n=function(t){return t.startContainer.nodeType===Node.ELEMENT_NODE?t.startContainer.childNodes[t.startOffset]||r(t.startContainer,!0):t.startContainer}(t),i=function(t){return t.endContainer.nodeType===Node.ELEMENT_NODE?t.endContainer.childNodes[t.endOffset]||r(t.endContainer,!0):r(t.endContainer)}(t);n!==i;)e(n),n=r(n)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e="";return i(t,(function(n){if(n.nodeType===Node.TEXT_NODE){var r=n===t.startContainer?t.startOffset:0,i=n===t.endContainer?t.endOffset:n.textContent.length;e+=n.textContent.slice(r,i)}})),e}},{}],9:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./lib":10,dup:6}],10:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.fromRange=function(t,e){if(void 0===t)throw new Error('missing required parameter "root"');if(void 0===e)throw new Error('missing required parameter "range"');return l(t,s.fromRange(t,e))},n.fromTextPosition=l,n.toRange=function(t,e){var n=c(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});return null===n?null:s.toRange(t,n)},n.toTextPosition=c;var r,i=t("diff-match-patch"),o=(r=i)&&r.__esModule?r:{default:r},s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(t("dom-anchor-text-position"));var a=new RegExp("(.|[\r\n]){1,"+String(32)+"}","g"),u=32;function l(t,e){if(void 0===t)throw new Error('missing required parameter "root"');if(void 0===e)throw new Error('missing required parameter "selector"');var n=e.start;if(void 0===n)throw new Error('selector missing required property "start"');if(n<0)throw new Error('property "start" must be a non-negative integer');var r=e.end;if(void 0===r)throw new Error('selector missing required property "end"');if(r<0)throw new Error('property "end" must be a non-negative integer');var i=t.textContent.substr(n,r-n),o=Math.max(0,n-u),s=t.textContent.substr(o,n-o),a=Math.min(t.textContent.length,r+u);return{exact:i,prefix:s,suffix:t.textContent.substr(r,a-r)}}function c(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(void 0===t)throw new Error('missing required parameter "root"');if(void 0===e)throw new Error('missing required parameter "selector"');var r=e.exact;if(void 0===r)throw new Error('selector missing required property "exact"');var i=e.prefix,s=e.suffix,u=n.hint,l=new o.default;l.Match_Distance=2*t.textContent.length;var c=r.match(a),h=void 0===u?t.textContent.length/2|0:u,f=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,d=-1,g=void 0!==s,m=!1;void 0!==i&&(d=l.match_main(t.textContent,i,h))>-1&&(h=d+i.length,m=!0),g&&!m&&(d=l.match_main(t.textContent,s,h+r.length))>-1&&(h=d-r.length);var v=c.shift();if(!((d=l.match_main(t.textContent,v,h))>-1))return null;h=p=(f=d)+v.length,l.Match_Distance=64;var y=c.reduce((function(e,n){if(!e)return null;var r=l.match_main(t.textContent,n,e.loc);return-1===r?null:(e.loc=r+n.length,e.start=Math.min(e.start,r),e.end=Math.max(e.end,r+n.length),e)}),{start:f,end:p,loc:h});return y?{start:y.start,end:y.end}:null}},{"diff-match-patch":4,"dom-anchor-text-position":6}],11:[function(t,e,n){e.exports=t("./lib/implementation").default},{"./lib/implementation":15}],12:[function(t,e,n){e.exports=t("./lib").default,e.exports.getPolyfill=t("./polyfill"),e.exports.implementation=t("./implementation"),e.exports.shim=t("./shim")},{"./implementation":11,"./lib":16,"./polyfill":19,"./shim":20}],13:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t){var e=arguments.length<=1||void 0===arguments[1]?4294967295:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],i=(9==t.nodeType||t.ownerDocument).createNodeIterator(t,e,n,!1);return new r(i,t,e,n)};var r=function(){function t(e,n,r,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.root=n,this.whatToShow=r,this.filter=i,this.referenceNode=n,this.pointerBeforeReferenceNode=!0,this._iter=e}return t.prototype.nextNode=function(){var t=this._iter.nextNode();return this.pointerBeforeReferenceNode=!1,null===t?null:(this.referenceNode=t,this.referenceNode)},t.prototype.previousNode=function(){var t=this._iter.previousNode();return this.pointerBeforeReferenceNode=!0,null===t?null:(this.referenceNode=t,this.referenceNode)},t.prototype.toString=function(){return"[object NodeIterator]"},t}()},{}],14:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t){var e=arguments.length<=1||void 0===arguments[1]?4294967295:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],r=t.ownerDocument;return r.createNodeIterator.call(r,t,e,n)}},{}],15:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t){var e=arguments.length<=1||void 0===arguments[1]?4294967295:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2];return new r(t,e,n)};var r=function(){function t(e,n,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.root=e,this.whatToShow=n,this.filter=r,this.referenceNode=e,this.pointerBeforeReferenceNode=!0,this._filter=function(t){return!r||1===r(t)},this._show=function(t){return n>>t.nodeType-1&!0}}return t.prototype.nextNode=function(){var t=this.pointerBeforeReferenceNode;this.pointerBeforeReferenceNode=!1;var e=this.referenceNode;if(t&&this._show(e)&&this._filter(e))return e;do{if(e.firstChild)e=e.firstChild;else{do{if(e===this.root)return null;if(e.nextSibling)break;e=e.parentNode}while(e);e=e.nextSibling}}while(!this._show(e)||!this._filter(e));return this.referenceNode=e,this.pointerBeforeReferenceNode=!1,e},t.prototype.previousNode=function(){var t=this.pointerBeforeReferenceNode;this.pointerBeforeReferenceNode=!0;var e=this.referenceNode;if(!t&&this._show(e)&&this._filter(e))return e;do{if(e===this.root)return null;if(e.previousSibling)for(e=e.previousSibling;e.lastChild;)e=e.lastChild;else e=e.parentNode}while(!this._show(e)||!this._filter(e));return this.referenceNode=e,this.pointerBeforeReferenceNode=!0,e},t.prototype.toString=function(){return"[object NodeIterator]"},t}()},{}],16:[function(t,e,n){"use strict";n.__esModule=!0;var r=s(t("./polyfill")),i=s(t("./implementation")),o=s(t("./shim"));function s(t){return t&&t.__esModule?t:{default:t}}var a=(0,r.default)();a.implementation=i.default,a.shim=o.default,n.default=a},{"./implementation":15,"./polyfill":17,"./shim":18}],17:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(){try{var t="undefined"==typeof document?{}:document;return(0,i.default)(t,4294967295,null,!1).referenceNode===t?i.default:r.default}catch(t){return o.default}};var r=s(t("./adapter")),i=s(t("./builtin")),o=s(t("./implementation"));function s(t){return t&&t.__esModule?t:{default:t}}},{"./adapter":13,"./builtin":14,"./implementation":15}],18:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(){var t="undefined"==typeof document?{}:document,e=(0,i.default)();return e!==r.default&&(t.createNodeIterator=e),e};var r=o(t("./builtin")),i=o(t("./polyfill"));function o(t){return t&&t.__esModule?t:{default:t}}},{"./builtin":14,"./polyfill":17}],19:[function(t,e,n){e.exports=t("./lib/polyfill").default},{"./lib/polyfill":17}],20:[function(t,e,n){e.exports=t("./lib/shim").default},{"./lib/shim":18}],21:[function(t,e,n){e.exports=t("./lib").default},{"./lib":22}],22:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t,e){if(t.whatToShow!==u)throw new Error(s);var n=0,r=t.referenceNode,i=null;if(function(t){return!isNaN(parseInt(t))&&isFinite(t)}(e))i={forward:function(){return n<e},backward:function(){return n>e}};else{if(!function(t){return t.nodeType===l}(e))throw new Error(a);i={forward:c(r,e)?function(){return!1}:function(){return r!==e},backward:function(){return r!=e||!t.pointerBeforeReferenceNode}}}for(;i.forward()&&null!==(r=t.nextNode());)n+=r.nodeValue.length;for(;i.backward()&&null!==(r=t.previousNode());)n-=r.nodeValue.length;return n};var r=o(t("ancestors")),i=o(t("index-of"));function o(t){return t&&t.__esModule?t:{default:t}}var s="Argument 1 of seek must use filter NodeFilter.SHOW_TEXT.",a="Argument 2 of seek must be a number or a Text Node.",u=4,l=3;function c(t,e){if(t===e)return!1;for(var n=null,o=[t].concat((0,r.default)(t)).reverse(),s=[e].concat((0,r.default)(e)).reverse();o[0]===s[0];)n=o.shift(),s.shift();return o=o[0],s=s[0],(0,i.default)(n.childNodes,o)>(0,i.default)(n.childNodes,s)}},{ancestors:1,"index-of":26}],23:[function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===i.call(t)},u=function(t){if(!t||"[object Object]"!==i.call(t))return!1;var e,n=r.call(t,"constructor"),o=t.constructor&&t.constructor.prototype&&r.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!o)return!1;for(e in t);return void 0===e||r.call(t,e)},l=function(t,e){o&&"__proto__"===e.name?o(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue},c=function(t,e){if("__proto__"===e){if(!r.call(t,e))return;if(s)return s(t,e).value}return t[e]};e.exports=function t(){var e,n,r,i,o,s,h=arguments[0],f=1,p=arguments.length,d=!1;for("boolean"==typeof h&&(d=h,h=arguments[1]||{},f=2),(null==h||"object"!=typeof h&&"function"!=typeof h)&&(h={});f<p;++f)if(null!=(e=arguments[f]))for(n in e)r=c(h,n),h!==(i=c(e,n))&&(d&&i&&(u(i)||(o=a(i)))?(o?(o=!1,s=r&&a(r)?r:[]):s=r&&u(r)?r:{},l(h,{name:n,newValue:t(d,s,i)})):void 0!==i&&l(h,{name:n,newValue:i}));return h}},{}],24:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r():"function"==typeof define&&define.amd?define(r):r()}(0,(function(){"use strict";function t(t){var e=!0,n=!1,r=null,i={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function o(t){return!!(t&&t!==document&&"HTML"!==t.nodeName&&"BODY"!==t.nodeName&&"classList"in t&&"contains"in t.classList)}function s(t){t.classList.contains("focus-visible")||(t.classList.add("focus-visible"),t.setAttribute("data-focus-visible-added",""))}function a(t){e=!1}function u(){document.addEventListener("mousemove",l),document.addEventListener("mousedown",l),document.addEventListener("mouseup",l),document.addEventListener("pointermove",l),document.addEventListener("pointerdown",l),document.addEventListener("pointerup",l),document.addEventListener("touchmove",l),document.addEventListener("touchstart",l),document.addEventListener("touchend",l)}function l(t){t.target.nodeName&&"html"===t.target.nodeName.toLowerCase()||(e=!1,document.removeEventListener("mousemove",l),document.removeEventListener("mousedown",l),document.removeEventListener("mouseup",l),document.removeEventListener("pointermove",l),document.removeEventListener("pointerdown",l),document.removeEventListener("pointerup",l),document.removeEventListener("touchmove",l),document.removeEventListener("touchstart",l),document.removeEventListener("touchend",l))}document.addEventListener("keydown",(function(n){n.metaKey||n.altKey||n.ctrlKey||(o(t.activeElement)&&s(t.activeElement),e=!0)}),!0),document.addEventListener("mousedown",a,!0),document.addEventListener("pointerdown",a,!0),document.addEventListener("touchstart",a,!0),document.addEventListener("visibilitychange",(function(t){"hidden"==document.visibilityState&&(n&&(e=!0),u())}),!0),u(),t.addEventListener("focus",(function(t){var n,r,a;o(t.target)&&(e||(r=(n=t.target).type,"INPUT"==(a=n.tagName)&&i[r]&&!n.readOnly||"TEXTAREA"==a&&!n.readOnly||n.isContentEditable))&&s(t.target)}),!0),t.addEventListener("blur",(function(t){var e;o(t.target)&&(t.target.classList.contains("focus-visible")||t.target.hasAttribute("data-focus-visible-added"))&&(n=!0,window.clearTimeout(r),r=window.setTimeout((function(){n=!1,window.clearTimeout(r)}),100),(e=t.target).hasAttribute("data-focus-visible-added")&&(e.classList.remove("focus-visible"),e.removeAttribute("data-focus-visible-added")))}),!0),t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&t.host?t.host.setAttribute("data-js-focus-visible",""):t.nodeType===Node.DOCUMENT_NODE&&document.documentElement.classList.add("js-focus-visible")}if("undefined"!=typeof window&&"undefined"!=typeof document){var e;window.applyFocusVisiblePolyfill=t;try{e=new CustomEvent("focus-visible-polyfill-ready")}catch(t){(e=document.createEvent("CustomEvent")).initCustomEvent("focus-visible-polyfill-ready",!1,!1,{})}window.dispatchEvent(e)}"undefined"!=typeof document&&t(document)}))},{}],25:[function(t,e,n){(function(t){(function(t,e,n,r,i){
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(e,n,i,o){"use strict";var s,a=["","webkit","Moz","MS","ms","o"],u=n.createElement("div"),l="function",c=Math.round,h=Math.abs,f=Date.now;function p(t,e,n){return setTimeout(_(t,n),e)}function d(t,e,n){return!!Array.isArray(t)&&(g(t,n[e],n),!0)}function g(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==o)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function m(t,n,r){var i="DEPRECATED METHOD: "+n+"\n"+r+" AT \n";return function(){var n=new Error("get-stack-trace"),r=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=e.console&&(e.console.warn||e.console.log);return o&&o.call(e.console,i,r),t.apply(this,arguments)}}s="function"!=typeof Object.assign?function(t){if(t===o||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==o&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var v=m((function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===o)&&(t[r[i]]=e[r[i]]),i++;return t}),"extend","Use `assign`."),y=m((function(t,e){return v(t,e,!0)}),"merge","Use `assign`.");function b(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&s(r,n)}function _(t,e){return function(){return t.apply(e,arguments)}}function w(t,e){return typeof t==l?t.apply(e&&e[0]||o,e):t}function x(t,e){return t===o?e:t}function E(t,e,n){g(O(e),(function(e){t.addEventListener(e,n,!1)}))}function T(t,e,n){g(O(e),(function(e){t.removeEventListener(e,n,!1)}))}function C(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function S(t,e){return t.indexOf(e)>-1}function O(t){return t.trim().split(/\s+/g)}function N(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function A(t){return Array.prototype.slice.call(t,0)}function R(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];N(i,s)<0&&r.push(t[o]),i[o]=s,o++}return n&&(r=e?r.sort((function(t,n){return t[e]>n[e]})):r.sort()),r}function P(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),s=0;s<a.length;){if((r=(n=a[s])?n+i:e)in t)return r;s++}return o}var k=1;function D(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow||e}var M="ontouchstart"in e,I=P(e,"PointerEvent")!==o,L=M&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),j=25,q=1,F=2,H=4,B=8,U=1,z=2,V=4,X=8,W=16,Y=z|V,$=X|W,G=Y|$,Q=["x","y"],K=["clientX","clientY"];function Z(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){w(t.options.enable,[t])&&n.handler(e)},this.init()}function J(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,s=e&q&&r-i==0,a=e&(H|B)&&r-i==0;n.isFirst=!!s,n.isFinal=!!a,s&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=tt(e)),i>1&&!n.firstMultiple?n.firstMultiple=tt(e):1===i&&(n.firstMultiple=!1);var s=n.firstInput,a=n.firstMultiple,u=a?a.center:s.center,l=e.center=et(r);e.timeStamp=f(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=ot(u,l),e.distance=it(u,l),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};e.eventType!==q&&o.eventType!==H||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=rt(e.deltaX,e.deltaY);var c,p,d=nt(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=d.x,e.overallVelocityY=d.y,e.overallVelocity=h(d.x)>h(d.y)?d.x:d.y,e.scale=a?(c=a.pointers,it((p=r)[0],p[1],K)/it(c[0],c[1],K)):1,e.rotation=a?function(t,e){return ot(e[1],e[0],K)+ot(t[1],t[0],K)}(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,i,s,a=t.lastInterval||e,u=e.timeStamp-a.timeStamp;if(e.eventType!=B&&(u>j||a.velocity===o)){var l=e.deltaX-a.deltaX,c=e.deltaY-a.deltaY,f=nt(u,l,c);r=f.x,i=f.y,n=h(f.x)>h(f.y)?f.x:f.y,s=rt(l,c),t.lastInterval=e}else n=a.velocity,r=a.velocityX,i=a.velocityY,s=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=s}(n,e);var g=t.element;C(e.srcEvent.target,g)&&(g=e.srcEvent.target),e.target=g}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function tt(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:c(t.pointers[n].clientX),clientY:c(t.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:e,center:et(e),deltaX:t.deltaX,deltaY:t.deltaY}}function et(t){var e=t.length;if(1===e)return{x:c(t[0].clientX),y:c(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:c(n/e),y:c(r/e)}}function nt(t,e,n){return{x:e/t||0,y:n/t||0}}function rt(t,e){return t===e?U:h(t)>=h(e)?t<0?z:V:e<0?X:W}function it(t,e,n){n||(n=Q);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function ot(t,e,n){n||(n=Q);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}Z.prototype={handler:function(){},init:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(D(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(D(this.element),this.evWin,this.domHandler)}};var st={mousedown:q,mousemove:F,mouseup:H},at="mousedown",ut="mousemove mouseup";function lt(){this.evEl=at,this.evWin=ut,this.pressed=!1,Z.apply(this,arguments)}b(lt,Z,{handler:function(t){var e=st[t.type];e&q&&0===t.button&&(this.pressed=!0),e&F&&1!==t.which&&(e=H),this.pressed&&(e&H&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var ct={pointerdown:q,pointermove:F,pointerup:H,pointercancel:B,pointerout:B},ht={2:"touch",3:"pen",4:"mouse",5:"kinect"},ft="pointerdown",pt="pointermove pointerup pointercancel";function dt(){this.evEl=ft,this.evWin=pt,Z.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}e.MSPointerEvent&&!e.PointerEvent&&(ft="MSPointerDown",pt="MSPointerMove MSPointerUp MSPointerCancel"),b(dt,Z,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=ct[r],o=ht[t.pointerType]||t.pointerType,s="touch"==o,a=N(e,t.pointerId,"pointerId");i&q&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):i&(H|B)&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(a,1))}});var gt={touchstart:q,touchmove:F,touchend:H,touchcancel:B},mt="touchstart",vt="touchstart touchmove touchend touchcancel";function yt(){this.evTarget=mt,this.evWin=vt,this.started=!1,Z.apply(this,arguments)}function bt(t,e){var n=A(t.touches),r=A(t.changedTouches);return e&(H|B)&&(n=R(n.concat(r),"identifier",!0)),[n,r]}b(yt,Z,{handler:function(t){var e=gt[t.type];if(e===q&&(this.started=!0),this.started){var n=bt.call(this,t,e);e&(H|B)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var _t={touchstart:q,touchmove:F,touchend:H,touchcancel:B},wt="touchstart touchmove touchend touchcancel";function xt(){this.evTarget=wt,this.targetIds={},Z.apply(this,arguments)}function Et(t,e){var n=A(t.touches),r=this.targetIds;if(e&(q|F)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,s=A(t.changedTouches),a=[],u=this.target;if(o=n.filter((function(t){return C(t.target,u)})),e===q)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<s.length;)r[s[i].identifier]&&a.push(s[i]),e&(H|B)&&delete r[s[i].identifier],i++;return a.length?[R(o.concat(a),"identifier",!0),a]:void 0}b(xt,Z,{handler:function(t){var e=_t[t.type],n=Et.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}});var Tt=2500,Ct=25;function St(){Z.apply(this,arguments);var t=_(this.handler,this);this.touch=new xt(this.manager,t),this.mouse=new lt(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Ot(t,e){t&q?(this.primaryTouch=e.changedPointers[0].identifier,Nt.call(this,e)):t&(H|B)&&Nt.call(this,e)}function Nt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)}),Tt)}}function At(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),s=Math.abs(n-i.y);if(o<=Ct&&s<=Ct)return!0}return!1}b(St,Z,{handler:function(t,e,n){var r="touch"==n.pointerType,i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)Ot.call(this,e,n);else if(i&&At.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Rt=P(u.style,"touchAction"),Pt=Rt!==o,kt="manipulation",Dt="none",Mt="pan-x",It="pan-y",Lt=function(){if(!Pt)return!1;var t={},n=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(r){t[r]=!n||e.CSS.supports("touch-action",r)})),t}();function jt(t,e){this.manager=t,this.set(e)}jt.prototype={set:function(t){"compute"==t&&(t=this.compute()),Pt&&this.manager.element.style&&Lt[t]&&(this.manager.element.style[Rt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return g(this.manager.recognizers,(function(e){w(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(S(t,Dt))return Dt;var e=S(t,Mt),n=S(t,It);return e&&n?Dt:e||n?e?Mt:It:S(t,kt)?kt:"auto"}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=S(r,Dt)&&!Lt[Dt],o=S(r,It)&&!Lt[It],s=S(r,Mt)&&!Lt[Mt];if(i){var a=1===t.pointers.length,u=t.distance<2,l=t.deltaTime<250;if(a&&u&&l)return}if(!s||!o)return i||o&&n&Y||s&&n&$?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var qt=1,Ft=2,Ht=4,Bt=8,Ut=Bt,zt=16;function Vt(t){this.options=s({},this.defaults,t||{}),this.id=k++,this.manager=null,this.options.enable=x(this.options.enable,!0),this.state=qt,this.simultaneous={},this.requireFail=[]}function Xt(t){return t&zt?"cancel":t&Bt?"end":t&Ht?"move":t&Ft?"start":""}function Wt(t){return t==W?"down":t==X?"up":t==z?"left":t==V?"right":""}function Yt(t,e){var n=e.manager;return n?n.get(t):t}function $t(){Vt.apply(this,arguments)}function Gt(){$t.apply(this,arguments),this.pX=null,this.pY=null}function Qt(){$t.apply(this,arguments)}function Kt(){Vt.apply(this,arguments),this._timer=null,this._input=null}function Zt(){$t.apply(this,arguments)}function Jt(){$t.apply(this,arguments)}function te(){Vt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ee(t,e){return(e=e||{}).recognizers=x(e.recognizers,ee.defaults.preset),new ne(t,e)}function ne(t,e){var n;this.options=s({},ee.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(I?dt:L?xt:M?St:lt))(n,J),this.touchAction=new jt(this,this.options.touchAction),re(this,!0),g(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function re(t,e){var n,r=t.element;r.style&&(g(t.options.cssProps,(function(i,o){n=P(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}Vt.prototype={defaults:{},set:function(t){return s(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(d(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Yt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return d(t,"dropRecognizeWith",this)?this:(t=Yt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(d(t,"requireFailure",this))return this;var e=this.requireFail;return-1===N(e,t=Yt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(d(t,"dropRequireFailure",this))return this;t=Yt(t,this);var e=N(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<Bt&&r(e.options.event+Xt(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=Bt&&r(e.options.event+Xt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|qt)))return!1;t++}return!0},recognize:function(t){var e=s({},t);if(!w(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(Ut|zt|32)&&(this.state=qt),this.state=this.process(e),this.state&(Ft|Ht|Bt|zt)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},b($t,Vt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=e&(Ft|Ht),i=this.attrTest(t);return r&&(n&B||!i)?e|zt:r||i?n&H?e|Bt:e&Ft?e|Ht:Ft:32}}),b(Gt,$t,{defaults:{event:"pan",threshold:10,pointers:1,direction:G},getTouchAction:function(){var t=this.options.direction,e=[];return t&Y&&e.push(It),t&$&&e.push(Mt),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,s=t.deltaY;return i&e.direction||(e.direction&Y?(i=0===o?U:o<0?z:V,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===s?U:s<0?X:W,n=s!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return $t.prototype.attrTest.call(this,t)&&(this.state&Ft||!(this.state&Ft)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Wt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),b(Qt,$t,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Dt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Ft)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),b(Kt,Vt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(H|B)&&!i)this.reset();else if(t.eventType&q)this.reset(),this._timer=p((function(){this.state=Ut,this.tryEmit()}),e.time,this);else if(t.eventType&H)return Ut;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Ut&&(t&&t.eventType&H?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),b(Zt,$t,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Dt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Ft)}}),b(Jt,$t,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Y|$,pointers:1},getTouchAction:function(){return Gt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Y|$)?e=t.overallVelocity:n&Y?e=t.overallVelocityX:n&$&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&h(e)>this.options.velocity&&t.eventType&H},emit:function(t){var e=Wt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),b(te,Vt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[kt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),t.eventType&q&&0===this.count)return this.failTimeout();if(r&&i&&n){if(t.eventType!=H)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||it(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=p((function(){this.state=Ut,this.tryEmit()}),e.interval,this),Ft):Ut}return 32},failTimeout:function(){return this._timer=p((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ut&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ee.VERSION="2.0.7",ee.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Zt,{enable:!1}],[Qt,{enable:!1},["rotate"]],[Jt,{direction:Y}],[Gt,{direction:Y},["swipe"]],[te],[te,{event:"doubletap",taps:2},["tap"]],[Kt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},ne.prototype={set:function(t){return s(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&i.state&Ut)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&n.state&(Ft|Ht|Bt)&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof Vt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(d(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(d(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=N(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==o&&e!==o){var n=this.handlers;return g(O(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==o){var n=this.handlers;return g(O(t),(function(t){e?n[t]&&n[t].splice(N(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var r=n.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}(t,e);var r=this.handlers[t]&&this.handlers[t].slice();if(r&&r.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<r.length;)r[i](e),i++}},destroy:function(){this.element&&re(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},s(ee,{INPUT_START:q,INPUT_MOVE:F,INPUT_END:H,INPUT_CANCEL:B,STATE_POSSIBLE:qt,STATE_BEGAN:Ft,STATE_CHANGED:Ht,STATE_ENDED:Bt,STATE_RECOGNIZED:Ut,STATE_CANCELLED:zt,STATE_FAILED:32,DIRECTION_NONE:U,DIRECTION_LEFT:z,DIRECTION_RIGHT:V,DIRECTION_UP:X,DIRECTION_DOWN:W,DIRECTION_HORIZONTAL:Y,DIRECTION_VERTICAL:$,DIRECTION_ALL:G,Manager:ne,Input:Z,TouchAction:jt,TouchInput:xt,MouseInput:lt,PointerEventInput:dt,TouchMouseInput:St,SingleTouchInput:yt,Recognizer:Vt,AttrRecognizer:$t,Tap:te,Pan:Gt,Swipe:Jt,Pinch:Qt,Rotate:Zt,Press:Kt,on:E,off:T,each:g,merge:y,extend:v,assign:s,inherit:b,bindFn:_,prefixed:P}),(void 0!==e?e:"undefined"!=typeof self?self:{}).Hammer=ee,"function"==typeof r&&r.amd?r((function(){return ee})):void 0!==t&&t.exports?t.exports=ee:e.Hammer=ee}(window,document),i("undefined"!=typeof Hammer?Hammer:window.Hammer)}).call(t,void 0,void 0,void 0,void 0,(function(t){e.exports=t}))}).call(this,window)},{}],26:[function(t,e,n){
/*!
 * index-of <https://github.com/jonschlinkert/index-of>
 *
 * Copyright (c) 2014-2015 Jon Schlinkert.
 * Licensed under the MIT license.
 */
"use strict";e.exports=function(t,e,n){if(n=n||0,null==t)return-1;var r=t.length,i=n<0?r+n:n;if(i>=t.length)return-1;for(;i<r;){if(t[i]===e)return i;i++}return-1}},{}],27:[function(t,e,n){(function(t){var n="Expected a function",r=NaN,i="[object Symbol]",o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt,c="object"==typeof t&&t&&t.Object===Object&&t,h="object"==typeof self&&self&&self.Object===Object&&self,f=c||h||Function("return this")(),p=Object.prototype.toString,d=Math.max,g=Math.min,m=function(){return f.Date.now()};function v(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function y(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&p.call(t)==i}(t))return r;if(v(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=v(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=a.test(t);return n||u.test(t)?l(t.slice(2),n?2:8):s.test(t)?r:+t}e.exports=function(t,e,r){var i,o,s,a,u,l,c=0,h=!1,f=!1,p=!0;if("function"!=typeof t)throw new TypeError(n);function b(e){var n=i,r=o;return i=o=void 0,c=e,a=t.apply(r,n)}function _(t){var n=t-l;return void 0===l||n>=e||n<0||f&&t-c>=s}function w(){var t=m();if(_(t))return x(t);u=setTimeout(w,function(t){var n=e-(t-l);return f?g(n,s-(t-c)):n}(t))}function x(t){return u=void 0,p&&i?b(t):(i=o=void 0,a)}function E(){var t=m(),n=_(t);if(i=arguments,o=this,l=t,n){if(void 0===u)return function(t){return c=t,u=setTimeout(w,e),h?b(t):a}(l);if(f)return u=setTimeout(w,e),b(l)}return void 0===u&&(u=setTimeout(w,e)),a}return e=y(e)||0,v(r)&&(h=!!r.leading,s=(f="maxWait"in r)?d(y(r.maxWait)||0,e):s,p="trailing"in r?!!r.trailing:p),E.cancel=function(){void 0!==u&&clearTimeout(u),c=0,i=l=o=u=void 0},E.flush=function(){return void 0===u?a:x(m())},E}}).call(this,window)},{}],28:[function(t,e,n){(function(t){(function(){var n,r,i,o,s,a;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:null!=t&&t.hrtime?(e.exports=function(){return(n()-s)/1e6},r=t.hrtime,o=(n=function(){var t;return 1e9*(t=r())[0]+t[1]})(),a=1e9*t.uptime(),s=o-a):Date.now?(e.exports=function(){return Date.now()-i},i=Date.now()):(e.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this,t("_process"))},{_process:29}],29:[function(t,e,n){var r,i,o=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(r===setTimeout)return setTimeout(t,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(t){r=s}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var l,c=[],h=!1,f=-1;function p(){h&&l&&(h=!1,l.length?c=l.concat(c):f=-1,c.length&&d())}function d(){if(!h){var t=u(p);h=!0;for(var e=c.length;e;){for(l=c,c=[];++f<e;)l&&l[f].run();f=-1,e=c.length}l=null,h=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function m(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new g(t,e)),1!==c.length||h||u(d)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],30:[function(t,e,n){(function(n){for(var r=t("performance-now"),i="undefined"==typeof window?n:window,o=["moz","webkit"],s="AnimationFrame",a=i["request"+s],u=i["cancel"+s]||i["cancelRequest"+s],l=0;!a&&l<o.length;l++)a=i[o[l]+"Request"+s],u=i[o[l]+"Cancel"+s]||i[o[l]+"CancelRequest"+s];if(!a||!u){var c=0,h=0,f=[];a=function(t){if(0===f.length){var e=r(),n=Math.max(0,1e3/60-(e-c));c=n+e,setTimeout((function(){var t=f.slice(0);f.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(c)}catch(t){setTimeout((function(){throw t}),0)}}),Math.round(n))}return f.push({handle:++h,callback:t,cancelled:!1}),h},u=function(t){for(var e=0;e<f.length;e++)f[e].handle===t&&(f[e].cancelled=!0)}}e.exports=function(t){return a.call(i,t)},e.exports.cancel=function(){u.apply(i,arguments)},e.exports.polyfill=function(t){t||(t=i),t.requestAnimationFrame=a,t.cancelAnimationFrame=u}}).call(this,window)},{"performance-now":28}],31:[function(t,e,n){var r="complete",i="canceled";function o(t,e,n){t.self===t?t.scrollTo(e,n):(t.scrollLeft=e,t.scrollTop=n)}function s(t){var e=t._scrollSettings;if(e){var n=e.maxSynchronousAlignments,i=function(t,e){var n,r,i,o,s,a,u,l=t.align,c=t.target.getBoundingClientRect(),h=l&&null!=l.left?l.left:.5,f=l&&null!=l.top?l.top:.5,p=l&&null!=l.leftOffset?l.leftOffset:0,d=l&&null!=l.topOffset?l.topOffset:0,g=h,m=f;if(t.isWindow(e))a=Math.min(c.width,e.innerWidth),u=Math.min(c.height,e.innerHeight),r=c.left+e.pageXOffset-e.innerWidth*g+a*g,i=c.top+e.pageYOffset-e.innerHeight*m+u*m,i-=d,o=(r-=p)-e.pageXOffset,s=i-e.pageYOffset;else{a=c.width,u=c.height,n=e.getBoundingClientRect();var v=c.left-(n.left-e.scrollLeft),y=c.top-(n.top-e.scrollTop);r=v+a*g-e.clientWidth*g,i=y+u*m-e.clientHeight*m,r=Math.max(Math.min(r,e.scrollWidth-e.clientWidth),0),i=Math.max(Math.min(i,e.scrollHeight-e.clientHeight),0),i-=d,o=(r-=p)-e.scrollLeft,s=i-e.scrollTop}return{x:r,y:i,differenceX:o,differenceY:s}}(e,t),a=Date.now()-e.startTime,u=Math.min(1/e.time*a,1);if(e.endIterations>=n)return o(t,i.x,i.y),t._scrollSettings=null,e.end(r);var l=1-e.ease(u);if(o(t,i.x-i.differenceX*l,i.y-i.differenceY*l),a>=e.time)return e.endIterations++,s(t);!function(t){if("requestAnimationFrame"in window)return window.requestAnimationFrame(t);setTimeout(t,16)}(s.bind(null,t))}}function a(t){return t.self===t}function u(t,e,n,r){var o,u=!e._scrollSettings,l=e._scrollSettings,c=Date.now(),h={passive:!0};function f(t){e._scrollSettings=null,e.parentElement&&e.parentElement._scrollSettings&&e.parentElement._scrollSettings.end(t),n.debug&&console.log("Scrolling ended with type",t,"for",e),r(t),o&&(e.removeEventListener("touchstart",o,h),e.removeEventListener("wheel",o,h))}l&&l.end(i);var p=n.maxSynchronousAlignments;null==p&&(p=3),e._scrollSettings={startTime:l?l.startTime:Date.now(),endIterations:0,target:t,time:n.time+(l?c-l.startTime:0),ease:n.ease,align:n.align,isWindow:n.isWindow||a,maxSynchronousAlignments:p,end:f},"cancellable"in n&&!n.cancellable||(o=f.bind(null,i),e.addEventListener("touchstart",o,h),e.addEventListener("wheel",o,h)),u&&s(e)}function l(t){return"pageXOffset"in t||(t.scrollHeight!==t.clientHeight||t.scrollWidth!==t.clientWidth)&&"hidden"!==getComputedStyle(t).overflow}function c(){return!0}e.exports=function(t,e,n){if(t){"function"==typeof e&&(n=e,e=null),e||(e={}),e.time=isNaN(e.time)?1e3:e.time,e.ease=e.ease||function(t){return 1-Math.pow(1-t,t/2)};var i=t.parentElement,o=1,s=e.validTarget||c,a=e.isScrollable;for(e.debug&&(console.log("About to scroll to",t),i||console.error("Target did not have a parent, is it mounted in the DOM?"));i;)if("BODY"===i.tagName&&(i=(i=i.ownerDocument).defaultView||i.ownerWindow),e.debug&&console.log("Scrolling parent node",i),s(i,o)&&(a?a(i,l):l(i))&&(o++,u(t,i,e,h)),!(i=i.parentElement)){h(r);break}}function h(t){--o||n&&n(t)}}},{}],32:[function(t,e,n){e.exports=t("./zen-observable.js").Observable},{"./zen-observable.js":33}],33:[function(t,e,n){"use strict";!function(t,r){void 0!==n?t(n,e):"undefined"!=typeof self&&t(self)}((function(t,e){function n(t){return"function"==typeof Symbol&&Boolean(Symbol[t])}function r(t){return n(t)?Symbol[t]:"@@"+t}function i(t,e){var n=t[e];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function o(t){var e=r("species");return e?t[e]:t}function s(t,e){Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);r.enumerable=!1,Object.defineProperty(t,n,r)}))}function a(t){var e=t._cleanup;e&&(t._cleanup=void 0,e())}function u(t){return void 0===t._observer}function l(t){u(t)||(t._observer=void 0,a(t))}function c(t,e){if(Object(t)!==t)throw new TypeError("Observer must be an object");this._cleanup=void 0,this._observer=t;var n=i(t,"start");if(n&&n.call(t,this),!u(this)){t=new h(this);try{var r=e.call(void 0,t);if(null!=r){if("function"==typeof r.unsubscribe)o=r,r=function(t){o.unsubscribe()};else if("function"!=typeof r)throw new TypeError(r+" is not a function");this._cleanup=r}}catch(e){return void t.error(e)}var o;u(this)&&a(this)}}function h(t){this._subscription=t}function f(t){if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}s(c.prototype={},{get closed(){return u(this)},unsubscribe:function(){l(this)}}),s(h.prototype={},{get closed(){return u(this._subscription)},next:function(t){var e=this._subscription;if(!u(e)){var n=e._observer;try{var r=i(n,"next");if(!r)return;return r.call(n,t)}catch(t){try{l(e)}finally{throw t}}}},error:function(t){var e=this._subscription;if(u(e))throw t;var n=e._observer;e._observer=void 0;try{var r=i(n,"error");if(!r)throw t;t=r.call(n,t)}catch(t){try{a(e)}finally{throw t}}return a(e),t},complete:function(t){var e=this._subscription;if(!u(e)){var n=e._observer;e._observer=void 0;try{var r=i(n,"complete");t=r?r.call(n,t):void 0}catch(t){try{a(e)}finally{throw t}}return a(e),t}}}),s(f.prototype,{subscribe:function(t){for(var e=[],n=1;n<arguments.length;++n)e.push(arguments[n]);return"function"==typeof t&&(t={next:t,error:e[0],complete:e[1]}),new c(t,this._subscriber)},forEach:function(t){var e=this;return new Promise((function(n,r){if("function"!=typeof t)return Promise.reject(new TypeError(t+" is not a function"));e.subscribe({_subscription:null,start:function(t){if(Object(t)!==t)throw new TypeError(t+" is not an object");this._subscription=t},next:function(e){var n=this._subscription;if(!n.closed)try{return t(e)}catch(t){r(t),n.unsubscribe()}},error:r,complete:n})}))},map:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");return new(o(this.constructor))((function(n){return e.subscribe({next:function(e){if(!n.closed){try{e=t(e)}catch(t){return n.error(t)}return n.next(e)}},error:function(t){return n.error(t)},complete:function(t){return n.complete(t)}})}))},filter:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");return new(o(this.constructor))((function(n){return e.subscribe({next:function(e){if(!n.closed){try{if(!t(e))return}catch(t){return n.error(t)}return n.next(e)}},error:function(t){return n.error(t)},complete:function(){return n.complete()}})}))},reduce:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");var n=o(this.constructor),r=arguments.length>1,i=!1,s=arguments[1],a=s;return new n((function(n){return e.subscribe({next:function(e){if(!n.closed){var o=!i;if(i=!0,!o||r)try{a=t(a,e)}catch(t){return n.error(t)}else a=e}},error:function(t){return n.error(t)},complete:function(){i||r?(n.next(a),n.complete()):n.error(new TypeError("Cannot reduce an empty sequence"))}})}))},flatMap:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");return new(o(this.constructor))((function(n){var r=!1,i=[],o=e.subscribe({next:function(e){if(t)try{e=t(e)}catch(t){return void n.error(t)}f.from(e).subscribe({_subscription:null,start:function(t){i.push(this._subscription=t)},next:function(t){n.next(t)},error:function(t){n.error(t)},complete:function(){var t=i.indexOf(this._subscription);t>=0&&i.splice(t,1),s()}})},error:function(t){return n.error(t)},complete:function(){r=!0,s()}});function s(){r&&0===i.length&&n.complete()}return function(t){i.forEach((function(t){return t.unsubscribe()})),o.unsubscribe()}}))}}),Object.defineProperty(f.prototype,r("observable"),{value:function(){return this},writable:!0,configurable:!0}),s(f,{from:function(t){var e="function"==typeof this?this:f;if(null==t)throw new TypeError(t+" is not an object");var o=i(t,r("observable"));if(o){var s=o.call(t);if(Object(s)!==s)throw new TypeError(s+" is not an object");return s.constructor===e?s:new e((function(t){return s.subscribe(t)}))}if(n("iterator")&&(o=i(t,r("iterator"))))return new e((function(e){for(var n,r=o.call(t)[Symbol.iterator]();!(n=r.next()).done;){var i=n.value;if(e.next(i),e.closed)return}e.complete()}));if(Array.isArray(t))return new e((function(e){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()}));throw new TypeError(t+" is not observable")},of:function(){for(var t=[],e=0;e<arguments.length;++e)t.push(arguments[e]);var n="function"==typeof this?this:f;return new n((function(e){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()}))}}),Object.defineProperty(f,r("species"),{get:function(){return this},configurable:!0}),t.Observable=f}))},{}],34:[function(t,e,n){e.exports='<hypothesis-adder-toolbar class="annotator-adder js-adder">\n  <hypothesis-adder-actions class="annotator-adder-actions">\n    <button class="annotator-adder-actions__button h-icon-annotate js-annotate-btn">\n      <span class="annotator-adder-actions__label" data-action="comment">Annotate</span>\n    </button>\n    <button class="annotator-adder-actions__button h-icon-highlight js-highlight-btn">\n      <span class="annotator-adder-actions__label" data-action="highlight">Highlight</span>\n    </button>\n  </hypothesis-adder-actions>\n</hypothesis-adder-toolbar>\n'},{}],35:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=t("classnames"),o=t("./adder.html"),s=".js-annotate-btn",a=".js-highlight-btn";function u(t){return t.toString()+"px"}var l=function(){function t(e,n){var r=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.element=function(t){var e,n=function(t){return t.attachShadow?t.attachShadow({mode:"open"}):t.createShadowRoot?t.createShadowRoot():null}(t);if(n){n.innerHTML=o,e=n.querySelector(".js-adder");var r=Array.from(document.styleSheets).map((function(t){return t.href})).filter((function(t){return(t||"").match(/(icomoon|annotator)\.css/)})),i=document.createElement("style");i.textContent=r.map((function(t){return'@import "'+t+'";'})).join("\n"),n.appendChild(i)}else t.innerHTML=o,e=t.querySelector(".js-adder");return e}(e),this._container=e,Object.assign(e.style,{display:"block",position:"absolute",top:0,zIndex:999}),this.element.style.visibility="hidden",this._view=this.element.ownerDocument.defaultView,this._enterTimeout=null;var i=function(t,e){t.preventDefault(),t.stopPropagation(),e(),r.hide()};this.element.querySelector(s).addEventListener("click",(function(t){return i(t,n.onAnnotate)})),this.element.querySelector(a).addEventListener("click",(function(t){return i(t,n.onHighlight)})),this._width=function(){return r.element.getBoundingClientRect().width},this._height=function(){return r.element.getBoundingClientRect().height}}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(t,[{key:"hide",value:function(){clearTimeout(this._enterTimeout),this.element.className=i({"annotator-adder":!0}),this.element.style.visibility="hidden"}},{key:"target",value:function(t,e){var n,r,i;n=e?1:2;var o=Math.min(20,t.width);return i=e?t.left-this._width()/2+o:t.left+t.width-this._width()/2-o,t.top-this._height()<0&&1===n?n=2:t.top+this._height()>this._view.innerHeight&&(n=1),r=2===n?t.top+t.height+10:t.top-this._height()-10,i=Math.max(i,0),i=Math.min(i,this._view.innerWidth-this._width()),r=Math.max(r,0),{top:r=Math.min(r,this._view.innerHeight-this._height()),left:i,arrowDirection:n}}},{key:"showAt",value:function(t,e,n){var r=this;this.element.className=i({"annotator-adder":!0,"annotator-adder--arrow-down":1===n,"annotator-adder--arrow-up":2===n}),this.element.querySelector(s).style.display="",this.element.querySelector(a).style.display="";var o=function(t){for(var e=t.parentElement;e.parentElement&&"static"===getComputedStyle(e).position;)e=e.parentElement;return e}(this._container).getBoundingClientRect();Object.assign(this._container.style,{top:u(e-o.top),left:u(t-o.left)}),this.element.style.visibility="visible",clearTimeout(this._enterTimeout),this._enterTimeout=setTimeout((function(){r.element.className+=" is-active"}),1)}}]),t}();e.exports={ARROW_POINTING_DOWN:1,ARROW_POINTING_UP:2,Adder:l}},{"./adder.html":34,classnames:2}],36:[function(t,e,n){var r,i,o,s,a;a=t("./types"),r=a.RangeAnchor,i=a.TextPositionAnchor,o=a.TextQuoteAnchor,s=function(t,e,n,r){return new Promise((function(i,o){try{return i(t.fromSelector(e,n,r).toRange(r))}catch(t){return o(t)}}))},n.anchor=function(t,e,n){var a,u,l,c,h,f,p,d,g;for(null==n&&(n={}),c=null,f=null,p=null,a=0,u=(d=null!=e?e:[]).length;a<u;a++)switch((g=d[a]).type){case"TextPositionSelector":c=g,n.hint=c.start;break;case"TextQuoteSelector":f=g;break;case"RangeSelector":p=g}return l=function(t){if(null!=(null!=f?f.exact:void 0)&&t.toString()!==f.exact)throw new Error("quote mismatch");return t},h=Promise.reject("unable to anchor"),null!=p&&(h=h.catch((function(){return s(r,t,p,n).then(l)}))),null!=c&&(h=h.catch((function(){return s(i,t,c,n).then(l)}))),null!=f&&(h=h.catch((function(){return s(o,t,f,n)}))),h},n.describe=function(t,e,n){var s,a,u;return null==n&&(n={}),u=[r,i,o],function(){var r,i,o;for(o=[],r=0,i=u.length;r<i;r++){a=u[r];try{s=a.fromRange(t,e,n),o.push(s.toSelector(n))}catch(t){continue}}return o}()}},{"./types":40}],37:[function(t,e,n){"use strict";function r(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function i(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}function o(t,e){return u(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}(t,e)||a()}function s(t){return u(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(t){if(Array.isArray(t))return t}var l=function(t,e){return r(h(t),(function(t){var n=!1;if(t.textLayer&&(n=t.textLayer.renderingDone),t.renderingState===g.FINISHED&&n){var r=t.textLayer.textLayerDiv;return b(r,e.start,e.end)}var i=t.div||t.el,o=i.getElementsByClassName("annotator-placeholder")[0];o||((o=document.createElement("span")).classList.add("annotator-placeholder"),o.textContent="Loading annotations",i.appendChild(o));var s=document.createRange();return s.setStartBefore(o),s.setEndAfter(o),s}))},c=i((function(t){return _[t]?_[t]:(_[t]=function(t){return r(h(t),(function(t){return r(t.pdfPage.getTextContent({normalizeWhitespace:!0}),(function(t){return t.items.filter((function(t){return/\S/.test(t.str)})).map((function(t){return t.str})).join("")}))}))}(t),_[t])})),h=i((function(t){var e=PDFViewerApplication.pdfViewer,n=e.getPageView(t);return function(t,e){var n=t();return n&&n.then?n.then(e):e(n)}((function(){if(!n||!n.pdfPage)return r(new Promise((function(n){document.addEventListener("pagesloaded",(function r(){document.removeEventListener("pagesloaded",r),n(e.getPageView(t))}))})),(function(t){n=t}))}),(function(){return n}))})),f=t("dom-seek"),p=t("dom-node-iterator/polyfill")(),d=t("./range"),g=t("../pdfjs-rendering-states"),m=t("./types"),v=m.TextPositionAnchor,y=m.TextQuoteAnchor,b=t("./text-position").toRange,_={},w={};function x(t){for(;!t.classList||!t.classList.contains("page");)t=t.parentNode;return t.getElementsByClassName("textLayer")[0]}function E(t){var e=-1;return function n(r){return++e===t?Promise.resolve(r):c(e).then((function(t){return n(r+t.length)}))}(0)}function T(t){var e=0,n=0;return c(0).then((function r(i){var o=PDFViewerApplication.pdfViewer.pagesCount-1;return n+i.length>t||e===o?(t=n,Promise.resolve({index:e,offset:t,textContent:i})):(++e,n+=i.length,c(e).then(r))}))}e.exports={anchor:function(t,e){var n=e.find((function(t){return"TextPositionSelector"===t.type})),r=e.find((function(t){return"TextQuoteSelector"===t.type})),i=Promise.reject("unable to anchor");return n&&(i=i.catch((function(){return T(n.start).then((function(e){var i=e.index,o=e.offset,s=e.textContent,a=n.start-o,u=n.end-o,c=u-a;!function(t){if(r&&r.exact!==t.toString())throw new Error("quote mismatch")}(s.substr(a,c));var h=new v(t,a,u);return l(i,h)}))}))),r&&(i=i.catch((function(){if(n&&w[r.exact]&&w[r.exact][n.start]){var t=w[r.exact][n.start],e=t.pageIndex,i=t.anchor;return l(e,i)}return function(t){var e=PDFViewerApplication.pdfViewer.pagesCount,n=Array(e).fill(0).map((function(t,e){return e}));return t?T(t.start).then((function(t){return function(t){for(var e=n.slice(0,t),r=n.slice(t),i=[];e.length>0||r.length>0;)r.length&&i.push(r.shift()),e.length&&i.push(e.pop());return i}(t.index)})):Promise.resolve(n)}(n).then((function(t){return function t(e,n,r){if(0===e.length)return Promise.reject(new Error("Quote not found"));var i=s(e),a=i[0],u=i.slice(1),h=c(a),f=E(a);return Promise.all([h,f]).then((function(t){var e=o(t,2),i=e[0],s=e[1],a={textContent:i},u=y.fromSelector(a,n);if(r){var l=r.start-s;return l=Math.max(0,l),l=Math.min(l,i.length),u.toPositionAnchor({hint:l})}return u.toPositionAnchor()})).then((function(t){return r&&(w[n.exact]||(w[n.exact]={}),w[n.exact][r.start]={pageIndex:a,anchor:t}),l(a,t)})).catch((function(){return t(u,n,r)}))}(t,r,n)}))}))),i},describe:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new d.BrowserRange(e).normalize(),i=x(r.start),o=x(r.end);if(i!==o)return Promise.reject(new Error("selecting across page breaks is not supported"));var s=r.limit(i),a=r.limit(o),u=function(t){return Array.from(t.parentNode.childNodes).indexOf(t)}(i.parentNode),l=p.call(document,i,NodeFilter.SHOW_TEXT),c=f(l,r.start),h=f(l,r.end)+c+r.end.textContent.length;return E(u).then((function(e){var r=new v(t,c+=e,h+=e).toSelector(n),i=document.createRange();i.setStartBefore(s.start),i.setEndAfter(a.end);var o=y.fromRange(t,i,n).toSelector(n);return Promise.all([r,o])}))},purgeCache:function(){_={},w={}}}},{"../pdfjs-rendering-states":59,"./range":38,"./text-position":39,"./types":40,"dom-node-iterator/polyfill":19,"dom-seek":21}],38:[function(t,e,n){var r,i,o,s={}.hasOwnProperty;r=t("jquery"),o=t("./util"),(i={}).sniff=function(t){return null!=t.commonAncestorContainer?new i.BrowserRange(t):"string"==typeof t.start?new i.SerializedRange(t):t.start&&"object"==typeof t.start?new i.NormalizedRange(t):(console.error("Could not sniff range type"),!1)},i.nodeFromXPath=function(t,e){var n,i,s,a,u;return null==e&&(e=document),i=function(t,n){null==n&&(n=null);try{return document.evaluate("."+t,e,n,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}catch(n){return console.log("XPath evaluation failed."),console.log("Trying fallback..."),o.nodeFromXPath(t,e)}},r.isXMLDoc(document.documentElement)?(n=document.createNSResolver(null===document.ownerDocument?document.documentElement:document.ownerDocument.documentElement),(a=i(t,n))||(t=function(){var e,n,r,i;for(i=[],e=0,n=(r=t.split("/")).length;e<n;e++)(u=r[e])&&-1===u.indexOf(":")?i.push(u.replace(/^([a-z]+)/,"xhtml:$1")):i.push(u);return i}().join("/"),s=document.lookupNamespaceURI(null),a=i(t,n=function(t){return"xhtml"===t?s:document.documentElement.getAttribute("xmlns:"+t)})),a):i(t)},i.RangeError=function(t){function e(t,n,r){this.type=t,this.message=n,this.parent=null!=r?r:null,e.__super__.constructor.call(this,this.message)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,Error),e}(),i.BrowserRange=function(){function t(t){this.commonAncestorContainer=t.commonAncestorContainer,this.startContainer=t.startContainer,this.startOffset=t.startOffset,this.endContainer=t.endContainer,this.endOffset=t.endOffset}return t.prototype.normalize=function(t){var e,n,r,s;if(this.tainted)return console.error("You may only call normalize() once on a BrowserRange!"),!1;if(this.tainted=!0,s={},this.startContainer.nodeType===Node.ELEMENT_NODE?(this.startOffset<this.startContainer.childNodes.length?s.start=o.getFirstTextNodeNotBefore(this.startContainer.childNodes[this.startOffset]):s.start=o.getFirstTextNodeNotBefore(this.startContainer),s.startOffset=0):(s.start=this.startContainer,s.startOffset=this.startOffset),this.endContainer.nodeType===Node.ELEMENT_NODE){if(null!=(n=this.endContainer.childNodes[this.endOffset])){for(e=n;null!=e&&e.nodeType!==Node.TEXT_NODE;)e=e.firstChild;null!=e&&(s.end=e,s.endOffset=0)}null==s.end&&(n=this.endOffset?this.endContainer.childNodes[this.endOffset-1]:this.endContainer.previousSibling,s.end=o.getLastTextNodeUpTo(n),s.endOffset=s.end.nodeValue.length)}else s.end=this.endContainer,s.endOffset=this.endOffset;for(r={},s.startOffset>0?!s.start.nextSibling||s.start.nodeValue.length>s.startOffset?r.start=s.start.splitText(s.startOffset):r.start=s.start.nextSibling:r.start=s.start,s.start===s.end?(r.start.nodeValue.length>s.endOffset-s.startOffset&&r.start.splitText(s.endOffset-s.startOffset),r.end=r.start):(s.end.nodeValue.length>s.endOffset&&s.end.splitText(s.endOffset),r.end=s.end),r.commonAncestor=this.commonAncestorContainer;r.commonAncestor.nodeType!==Node.ELEMENT_NODE;)r.commonAncestor=r.commonAncestor.parentNode;return new i.NormalizedRange(r)},t.prototype.serialize=function(t,e){return this.normalize(t).serialize(t,e)},t}(),i.NormalizedRange=function(){function t(t){this.commonAncestor=t.commonAncestor,this.start=t.start,this.end=t.end}return t.prototype.normalize=function(t){return this},t.prototype.limit=function(t){var e,n,i,o,s,a;if(!(i=r.grep(this.textNodes(),(function(e){return e.parentNode===t||r.contains(t,e.parentNode)}))).length)return null;for(this.start=i[0],this.end=i[i.length-1],a=r(this.start).parents(),e=0,n=(s=r(this.end).parents()).length;e<n;e++)if(o=s[e],-1!==a.index(o)){this.commonAncestor=o;break}return this},t.prototype.serialize=function(t,e){var n,s,a;return a=(s=function(n,i){var s,a,u,l,c,h,f;for(c=e?r(n).parents(":not("+e+")").eq(0):r(n).parent(),f=o.xpathFromNode(c,t)[0],l=0,s=0,a=(u=(h=o.getTextNodes(c)).slice(0,h.index(n))).length;s<a;s++)l+=u[s].nodeValue.length;return i?[f,l+n.nodeValue.length]:[f,l]})(this.start),n=s(this.end,!0),new i.SerializedRange({start:a[0],end:n[0],startOffset:a[1],endOffset:n[1]})},t.prototype.text=function(){var t;return function(){var e,n,r,i;for(i=[],e=0,n=(r=this.textNodes()).length;e<n;e++)t=r[e],i.push(t.nodeValue);return i}.call(this).join("")},t.prototype.textNodes=function(){var t,e,n,i;return n=(e=[(i=o.getTextNodes(r(this.commonAncestor))).index(this.start),i.index(this.end)])[0],t=e[1],r.makeArray(i.slice(n,+t+1||9e9))},t.prototype.toRange=function(){var t;return(t=document.createRange()).setStartBefore(this.start),t.setEndAfter(this.end),t},t}(),i.SerializedRange=function(){function t(t){this.start=t.start,this.startOffset=t.startOffset,this.end=t.end,this.endOffset=t.endOffset}return t.prototype.normalize=function(t){var e,n,s,a,u,l,c,h,f,p,d,g,m,v;for(p={},s=0,u=(d=["start","end"]).length;s<u;s++){f=d[s];try{h=i.nodeFromXPath(this[f],t)}catch(t){throw n=t,new i.RangeError(f,"Error while finding "+f+" node: "+this[f]+": "+n,n)}if(!h)throw new i.RangeError(f,"Couldn't find "+f+" node: "+this[f]);for(c=0,m=this[f+"Offset"],"end"===f&&m--,a=0,l=(g=o.getTextNodes(r(h))).length;a<l;a++){if(c+(v=g[a]).nodeValue.length>m){p[f+"Container"]=v,p[f+"Offset"]=this[f+"Offset"]-c;break}c+=v.nodeValue.length}if(null==p[f+"Offset"])throw new i.RangeError(f+"offset","Couldn't find offset "+this[f+"Offset"]+" in element "+this[f])}return e=null==document.compareDocumentPosition?function(t,e){return t.contains(e)}:function(t,e){return 16&t.compareDocumentPosition(e)},r(p.startContainer).parents().each((function(){if(e(this,p.endContainer))return p.commonAncestorContainer=this,!1})),new i.BrowserRange(p).normalize(t)},t.prototype.serialize=function(t,e){return this.normalize(t).serialize(t,e)},t.prototype.toObject=function(){return{start:this.start,startOffset:this.startOffset,end:this.end,endOffset:this.endOffset}},t}(),e.exports=i},{"./util":41,jquery:"jquery"}],39:[function(t,e,n){"use strict";e.exports={toRange:function(t,e,n){for(var r,i,o,s,a,u=t.ownerDocument.createNodeIterator(t,NodeFilter.SHOW_TEXT,null,!1),l=0;(a=u.nextNode())&&(!r||!o);){var c=a.nodeValue;!r&&e>=l&&e<=l+c.length&&(r=a,i=e-l),!o&&n>=l&&n<=l+c.length&&(o=a,s=n-l),l+=c.length}if(!r)throw new Error("invalid start offset");if(!o)throw new Error("invalid end offset");var h=t.ownerDocument.createRange();return h.setStart(r,i),h.setEnd(o,s),h}}},{}],40:[function(t,e,n){var r,i,o,s,a,u,l;s=t("dom-anchor-text-position"),a=t("dom-anchor-text-quote"),l=t("./range"),u=function(t){throw new Error('missing required parameter "'+t+'"')},r=function(){function t(t,e){null==t&&u("root"),null==e&&u("range"),this.root=t,this.range=l.sniff(e).normalize(this.root)}return t.fromRange=function(e,n){return new t(e,n)},t.fromSelector=function(e,n){var r;return r={start:n.startContainer,startOffset:n.startOffset,end:n.endContainer,endOffset:n.endOffset},new t(e,new l.SerializedRange(r))},t.prototype.toRange=function(){return this.range.toRange()},t.prototype.toSelector=function(t){var e;return null==t&&(t={}),{type:"RangeSelector",startContainer:(e=this.range.serialize(this.root,t.ignoreSelector)).start,startOffset:e.startOffset,endContainer:e.end,endOffset:e.endOffset}},t}(),i=function(){function t(t,e,n){this.root=t,this.start=e,this.end=n}return t.fromRange=function(e,n){var r;return r=s.fromRange(e,n),t.fromSelector(e,r)},t.fromSelector=function(e,n){return new t(e,n.start,n.end)},t.prototype.toSelector=function(){return{type:"TextPositionSelector",start:this.start,end:this.end}},t.prototype.toRange=function(){return s.toRange(this.root,{start:this.start,end:this.end})},t}(),o=function(){function t(t,e,n){null==n&&(n={}),this.root=t,this.exact=e,this.context=n}return t.fromRange=function(e,n,r){var i;return i=a.fromRange(e,n,r),t.fromSelector(e,i)},t.fromSelector=function(e,n){var r,i;return r=n.prefix,i=n.suffix,new t(e,n.exact,{prefix:r,suffix:i})},t.prototype.toSelector=function(){return{type:"TextQuoteSelector",exact:this.exact,prefix:this.context.prefix,suffix:this.context.suffix}},t.prototype.toRange=function(t){var e;if(null==t&&(t={}),null===(e=a.toRange(this.root,this.toSelector(),t)))throw new Error("Quote not found");return e},t.prototype.toPositionAnchor=function(t){var e;if(null==t&&(t={}),null===(e=a.toTextPosition(this.root,this.toSelector(),t)))throw new Error("Quote not found");return new i(this.root,e.start,e.end)},t}(),n.RangeAnchor=r,n.TextPositionAnchor=i,n.TextQuoteAnchor=o},{"./range":38,"dom-anchor-text-position":6,"dom-anchor-text-quote":9}],41:[function(t,e,n){var r,i,o,s,a;r=t("jquery"),o=t("./xpath"),s=o.simpleXPathJQuery,a=o.simpleXPathPure,(i={}).flatten=function(t){var e;return(e=function(t){var n,i,o,s;for(i=[],o=0,s=t.length;o<s;o++)n=t[o],i=i.concat(n&&r.isArray(n)?e(n):n);return i})(t)},i.getTextNodes=function(t){var e;return e=function(t){var n;if(t&&t.nodeType!==Node.TEXT_NODE){if(n=[],t.nodeType!==Node.COMMENT_NODE)for(t=t.lastChild;t;)n.push(e(t)),t=t.previousSibling;return n.reverse()}return t},t.map((function(){return i.flatten(e(this))}))},i.getLastTextNodeUpTo=function(t){var e;switch(t.nodeType){case Node.TEXT_NODE:return t;case Node.ELEMENT_NODE:if(null!=t.lastChild&&null!=(e=i.getLastTextNodeUpTo(t.lastChild)))return e}return null!=(t=t.previousSibling)?i.getLastTextNodeUpTo(t):null},i.getFirstTextNodeNotBefore=function(t){var e;switch(t.nodeType){case Node.TEXT_NODE:return t;case Node.ELEMENT_NODE:if(null!=t.firstChild&&null!=(e=i.getFirstTextNodeNotBefore(t.firstChild)))return e}return null!=(t=t.nextSibling)?i.getFirstTextNodeNotBefore(t):null},i.xpathFromNode=function(t,e){var n;try{n=s.call(t,e)}catch(r){console.log("jQuery-based XPath construction failed! Falling back to manual."),n=a.call(t,e)}return n},i.nodeFromXPath=function(t,e){var n,r,i,o,s,a,u;for(s=e,n=0,i=(u=t.substring(1).split("/")).length;n<i;n++)o=(a=u[n].split("["))[0],r=null!=(r=a[1])?parseInt((null!=r?r.split("]"):void 0)[0]):1,s=findChild(s,o.toLowerCase(),r);return s},e.exports={nodeFromXPath:i.nodeFromXPath,xpathFromNode:i.xpathFromNode,getTextNodes:i.getTextNodes,getFirstTextNodeNotBefore:i.getFirstTextNodeNotBefore,getLastTextNodeUpTo:i.getLastTextNodeUpTo}},{"./xpath":42,jquery:"jquery"}],42:[function(t,e,n){var r,i,o,s,a;r=t("jquery"),s=function(t){return this.map((function(){var e,n,i,o;for(i="",e=this;(null!=e?e.nodeType:void 0)===Node.ELEMENT_NODE&&e!==t;)o=e.tagName.replace(":","\\:"),n="["+(n=r(e.parentNode).children(o).index(e)+1)+"]",i="/"+e.tagName.toLowerCase()+n+i,e=e.parentNode;return i})).get()},a=function(t){var e,n,r;return e=function(t){return i(t)+"["+o(t)+"]"},r=t,n=function(t){var n;for(n="";t!==r;){if(null==t)throw new Error("Called getPathTo on a node which was not a descendant of @rootNode. "+r);n=e(t)+"/"+n,t=t.parentNode}return(n="/"+n).replace(/\/$/,"")},this.map((function(){return n(this)})).get()},i=function(t){var e;switch(e=t.nodeName.toLowerCase()){case"#text":return"text()";case"#comment":return"comment()";case"#cdata-section":return"cdata-section()";default:return e}},o=function(t){var e,n;for(e=0,n=t;n;)n.nodeName===t.nodeName&&e++,n=n.previousSibling;return e},e.exports={simpleXPathJQuery:s,simpleXPathPure:a}},{jquery:"jquery"}],43:[function(t,e,n){"use strict";var r=t("../shared/bridge-events"),i="data-hypothesis-annotation-count";e.exports=function(t,e){e.on(r.PUBLIC_ANNOTATION_COUNT_CHANGED,(function(e){var n=t.querySelectorAll("["+i+"]");Array.from(n).forEach((function(t){t.textContent=e}))}))}},{"../shared/bridge-events":74}],44:[function(t,e,n){"use strict";function r(t,e){var n=this;if(this.bridge=t,!e.on)throw new Error("options.on unspecified for AnnotationSync.");if(!e.emit)throw new Error("options.emit unspecified for AnnotationSync.");this.cache={},this._on=e.on,this._emit=e.emit,Object.keys(this._eventListeners).forEach((function(t){var e=n._eventListeners[t];n._on(t,(function(t){e.apply(n,[t])}))})),Object.keys(this._channelListeners).forEach((function(t){n.bridge.on(t,(function(e,r){n._channelListeners[t].apply(n,[e,r])}))}))}r.prototype.cache=null,r.prototype.sync=function(t){var e;return t=function(){var e,n=[];for(e=0;e<t.length;e++)n.push(this._format(t[e]));return n}.call(this),this.bridge.call("sync",t,(e=this,function(t,n){var r,i=[];for(n=n||[],r=0;r<n.length;r++)i.push(e._parse(n[r]));return i})),this},r.prototype._channelListeners={deleteAnnotation:function(t,e){var n=this._parse(t);delete this.cache[n.$tag],this._emit("annotationDeleted",n),e(null,this._format(n))},loadAnnotations:function(t,e){var n=function(){var e,n=[];for(e=0;e<t.length;e++)n.push(this._parse(t[e]));return n}.call(this);return this._emit("annotationsLoaded",n),e(null,n)}},r.prototype._eventListeners={beforeAnnotationCreated:function(t){if(!t.$tag)return this._mkCallRemotelyAndParseResults("beforeCreateAnnotation")(t)}},r.prototype._mkCallRemotelyAndParseResults=function(t,e){return n=this,function(r){n.bridge.call(t,n._format(r),(function(t,r){null===t&&n._parseResults(r),"function"==typeof e&&e(t,r)}))};var n},r.prototype._parseResults=function(t){var e,n,r,i;for(r=0;r<t.length;r++)for(e=t[r],e=[].concat(e),i=0;i<e.length;i++)null!==(n=e[i])&&this._parse(n)},r.prototype._tag=function(t,e){return t.$tag?t:(e=e||window.btoa(Math.random()),Object.defineProperty(t,"$tag",{value:e}),this.cache[e]=t,t)},r.prototype._parse=function(t){var e=Object.assign(this.cache[t.tag]||{},t.msg);return this._tag(e,t.tag)},r.prototype._format=function(t){return this._tag(t),{tag:t.$tag,msg:t}},e.exports=r},{}],45:[function(t,e,n){"use strict";e.exports=function(t){return t.hasOwnProperty("hypothesisConfig")?"function"!=typeof t.hypothesisConfig?(console.warn("hypothesisConfig must be a function, see: https://h.readthedocs.io/projects/client/en/latest/publishers/config/#window.hypothesisConfig"),{}):t.hypothesisConfig():{}}},{}],46:[function(t,e,n){"use strict";var r=t("./settings");e.exports=function(t){var e=r(t);return{annotations:e.annotations,assetRoot:e.hostPageSetting("assetRoot",{allowInBrowserExt:!0}),branding:e.hostPageSetting("branding"),clientUrl:e.clientUrl,enableExperimentalNewNoteButton:e.hostPageSetting("enableExperimentalNewNoteButton"),group:e.group,focus:e.hostPageSetting("focus"),theme:e.hostPageSetting("theme"),usernameUrl:e.hostPageSetting("usernameUrl"),onLayoutChange:e.hostPageSetting("onLayoutChange"),openSidebar:e.hostPageSetting("openSidebar",{allowInBrowserExt:!0}),query:e.query,requestConfigFromFrame:e.hostPageSetting("requestConfigFromFrame"),services:e.hostPageSetting("services"),showHighlights:e.showHighlights,sidebarAppUrl:e.sidebarAppUrl,subFrameIdentifier:e.hostPageSetting("subFrameIdentifier",{allowInBrowserExt:!0}),externalContainerSelector:e.hostPageSetting("externalContainerSelector")}}},{"./settings":48}],47:[function(t,e,n){"use strict";e.exports=function(t){return!(t.startsWith("http://")||t.startsWith("https://"))}},{}],48:[function(t,e,n){"use strict";var r=t("./config-func-settings-from"),i=t("./is-browser-extension"),o=t("../../shared/settings");e.exports=function(t){var e=o.jsonConfigsFrom(t.document),n=r(t);function s(){var e=t.document.querySelector('link[type="application/annotator+html"][rel="sidebar"]');if(!e)throw new Error('No application/annotator+html (rel="sidebar") link in the document');if(!e.href)throw new Error('application/annotator+html (rel="sidebar") link has no href');return e.href}function a(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.allowInBrowserExt||!1,a=void 0!==r.defaultValue;return!o&&i(s())?a?r.defaultValue:null:n.hasOwnProperty(t)?n[t]:e.hasOwnProperty(t)?e[t]:a?r.defaultValue:null}return{get annotations(){return e.annotations||((n=t.location.href.match(/#annotations:([A-Za-z0-9_-]+)$/))?n[1]:null);var n},get clientUrl(){return function(){var e=t.document.querySelector('link[type="application/annotator+javascript"][rel="hypothesis-client"]');if(!e)throw new Error('No application/annotator+javascript (rel="hypothesis-client") link in the document');if(!e.href)throw new Error('application/annotator+javascript (rel="hypothesis-client") link has no href');return e.href}()},get group(){return e.group||((n=t.location.href.match(/#annotations:group:([A-Za-z0-9_-]+)$/))?n[1]:null);var n},get showHighlights(){return null===(t=a("showHighlights"))&&(t="always"),"boolean"==typeof t?t?"always":"never":t;var t},get sidebarAppUrl(){return s()},get query(){return e.query||function(){var e=t.location.href.match(/#annotations:(query|q):(.+)$/i);if(e)try{return decodeURIComponent(e[2])}catch(t){}return null}()},hostPageSetting:a}}},{"../../shared/settings":78,"./config-func-settings-from":45,"./is-browser-extension":47}],49:[function(t,e,n){var r,i,o,s,a=[].slice,u={}.hasOwnProperty;r=t("jquery"),e.exports=i=function(){function t(t,e){this.options=r.extend(!0,{},this.options,e),this.element=r(t),this._closures={},this.on=this.subscribe,this.addEvents()}return t.prototype.events={},t.prototype.options={},t.prototype.element=null,t.prototype.destroy=function(){return this.removeEvents()},t.prototype.addEvents=function(){var e,n,r,i,o;for(o=[],n=0,r=(i=t._parseEvents(this.events)).length;n<r;n++)e=i[n],o.push(this._addEvent(e.selector,e.event,e.functionName));return o},t.prototype.removeEvents=function(){var e,n,r,i,o;for(o=[],n=0,r=(i=t._parseEvents(this.events)).length;n<r;n++)e=i[n],o.push(this._removeEvent(e.selector,e.event,e.functionName));return o},t.prototype._addEvent=function(e,n,r){var i,o;return o=this,i=function(){return o[r].apply(o,arguments)},""===e&&t._isCustomEvent(n)?this.subscribe(n,i):this.element.delegate(e,n,i),this._closures[e+"/"+n+"/"+r]=i,this},t.prototype._removeEvent=function(e,n,r){var i;return i=this._closures[e+"/"+n+"/"+r],""===e&&t._isCustomEvent(n)?this.unsubscribe(n,i):this.element.undelegate(e,n,i),delete this._closures[e+"/"+n+"/"+r],this},t.prototype.publish=function(){return this.element.triggerHandler.apply(this.element,arguments),this},t.prototype.subscribe=function(t,e){var n;return(n=function(){return e.apply(this,[].slice.call(arguments,1))}).guid=e.guid=r.guid+=1,this.element.bind(t,n),this},t.prototype.unsubscribe=function(){return this.element.unbind.apply(this.element,arguments),this},t}(),i._parseEvents=function(t){var e,n,r,i,o,s,u;for(s in n=[],t)r=t[s],u=2<=(o=s.split(" ")).length?a.call(o,0,i=o.length-1):(i=0,[]),e=o[i++],n.push({selector:u.join(" "),event:e,functionName:r});return n},i.natives=(s=function(){var t,e;for(o in e=[],t=r.event.special)u.call(t,o)&&(t[o],e.push(o));return e}(),"blur focus focusin focusout load resize scroll unload click dblclick\nmousedown mouseup mousemove mouseover mouseout mouseenter mouseleave\nchange select submit keydown keypress keyup error".split(/[^a-z]+/).concat(s)),i._isCustomEvent=function(t){return t=t.split(".")[0],-1===r.inArray(t,i.natives)}},{jquery:"jquery"}],50:[function(t,e,n){"use strict";var r=t("../shared/bridge-events"),i=t("../shared/warn-once"),o={},s=function(t){o=t||{}};e.exports={init:function(t){t.on(r.FEATURE_FLAGS_UPDATED,s)},reset:function(){s({})},flagEnabled:function(t){return t in o?o[t]:(i("looked up unknown feature",t),!1)}}},{"../shared/bridge-events":74,"../shared/warn-once":79}],51:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=t("./util/frame-util"),o=t("lodash.debounce"),s=40,a=function(){function t(e){var n=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._target=e,this._handledFrames=[],this._mutationObserver=new MutationObserver(o((function(){n._discoverFrames()}),s))}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(t,[{key:"observe",value:function(t,e){this._onFrameAdded=t,this._onFrameRemoved=e,this._discoverFrames(),this._mutationObserver.observe(this._target,{childList:!0,subtree:!0})}},{key:"disconnect",value:function(){this._mutationObserver.disconnect()}},{key:"_addFrame",value:function(t){var e=this;i.isAccessible(t)&&i.isDocumentReady(t,(function(){t.contentWindow.addEventListener("unload",(function(){e._removeFrame(t)})),e._handledFrames.push(t),e._onFrameAdded(t)}))}},{key:"_removeFrame",value:function(t){this._onFrameRemoved(t),this._handledFrames=this._handledFrames.filter((function(e){return e!==t}))}},{key:"_discoverFrames",value:function(){var t=i.findFrames(this._target),e=!0,n=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(e=(o=s.next()).done);e=!0){var a=o.value;this._handledFrames.includes(a)||this._addFrame(a)}}catch(t){n=!0,r=t}finally{try{e||null==s.return||s.return()}finally{if(n)throw r}}var u=!0,l=!1,c=void 0;try{for(var h,f=function(t,e){return t.filter((function(t){return!e.includes(t)}))}(this._handledFrames,t)[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var p=h.value;this._removeFrame(p)}}catch(t){l=!0,c=t}finally{try{u||null==f.return||f.return()}finally{if(l)throw c}}}}]),t}();a.DEBOUNCE_WAIT=s,e.exports=a},{"./util/frame-util":71,"lodash.debounce":27}],52:[function(t,e,n){var r,i,o,s,a,u,l,c,h,f,p,d,g,m={}.hasOwnProperty,v=[].slice,y=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};t("extend"),h=t("raf"),p=t("scroll-into-view"),i=t("custom-event"),o=t("./delegator"),r=t("jquery"),s=t("./adder"),l=t("./anchoring/html"),u=t("./highlighter"),f=t("./range-util"),d=t("./selections"),g=t("./anchoring/range"),c=t("./util/url").normalizeURI,a=function(t){return new Promise((function(e,n){return h((function(){try{return e(t())}catch(t){return n(t)}}))}))},e.exports=function(t){function e(t,n,i){var o,a,u,c,h,f;for(a in null==i&&(i=l),e.__super__.constructor.apply(this,arguments),this.adder=r(this.html.adder).appendTo(this.element).hide(),h=this,this.adderCtrl=new s.Adder(this.adder[0],{onAnnotate:function(){return h.createAnnotation(),document.getSelection().removeAllRanges()},onHighlight:function(){return h.setVisibleHighlights(!0),h.createHighlight(),document.getSelection().removeAllRanges()}}),this.selections=d(document).subscribe({next:function(t){return t?h._onSelection(t):h._onClearSelection()}}),this.plugins={},this.anchors=[],this.frameIdentifier=n.subFrameIdentifier||null,this.anchoring=i,o={config:n,on:(f=this,function(t,e){return f.subscribe(t,e)}),emit:function(t){return function(){var e,n;return n=arguments[0],e=2<=arguments.length?v.call(arguments,1):[],t.publish(n,e)}}(this)},this.addPlugin("CrossFrame",o),this.crossframe=this.plugins.CrossFrame,this.crossframe.onConnect(function(t){return function(){return t._setupInitialState(n)}}(this)),this._connectAnnotationSync(this.crossframe),this._connectAnnotationUISync(this.crossframe),c=this.options)m.call(c,a)&&(u=c[a],!this.plugins[a]&&this.options.pluginClasses[a]&&this.addPlugin(a,u))}return function(t,e){for(var n in e)m.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,o),e.prototype.events={".annotator-hl click":"onHighlightClick",".annotator-hl mouseover":"onHighlightMouseover",".annotator-hl mouseout":"onHighlightMouseout",click:"onElementClick",touchstart:"onElementTouchStart"},e.prototype.options={Document:{},TextSelection:{}},e.prototype.anchoring=null,e.prototype.plugins=null,e.prototype.anchors=null,e.prototype.visibleHighlights=!1,e.prototype.frameIdentifier=null,e.prototype.html={adder:"<hypothesis-adder></hypothesis-adder>"},e.prototype.addPlugin=function(t,e){var n,r;return this.plugins[t]?console.error("You cannot have more than one instance of any plugin."):"function"==typeof(r=this.options.pluginClasses[t])?(this.plugins[t]=new r(this.element[0],e),this.plugins[t].annotator=this,"function"==typeof(n=this.plugins[t]).pluginInit&&n.pluginInit()):console.error("Could not load "+t+" plugin. Have you included the appropriate <script> tag?"),this},e.prototype.getDocumentInfo=function(){var t,e,n;return null!=this.plugins.PDF?(t=Promise.resolve(this.plugins.PDF.getMetadata()),e=Promise.resolve(this.plugins.PDF.uri())):null!=this.plugins.Document?(e=Promise.resolve(this.plugins.Document.uri()),t=Promise.resolve(this.plugins.Document.metadata)):(e=Promise.reject(),t=Promise.reject()),e=e.catch((function(){return decodeURIComponent(window.location.href)})),t=t.catch((function(){return{title:document.title,link:[{href:decodeURIComponent(window.location.href)}]}})),Promise.all([t,e]).then((n=this,function(t){var e,r;return r=t[0],e=t[1],{uri:c(e),metadata:r,frameIdentifier:n.frameIdentifier}}))},e.prototype._setupInitialState=function(t){return this.publish("panelReady"),this.setVisibleHighlights("always"===t.showHighlights)},e.prototype._connectAnnotationSync=function(t){var e;return this.subscribe("annotationDeleted",(e=this,function(t){return e.detach(t)})),this.subscribe("annotationsLoaded",function(t){return function(e){var n,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)n=e[r],o.push(t.anchor(n));return o}}(this))},e.prototype._connectAnnotationUISync=function(t){var e;return t.on("focusAnnotations",(e=this,function(t){var n,i,o,s,a,u,l;for(null==t&&(t=[]),u=[],i=0,o=(s=e.anchors).length;i<o;i++)null!=(n=s[i]).highlights&&(a=n.annotation.$tag,l=y.call(t,a)>=0,u.push(r(n.highlights).toggleClass("annotator-hl-focused",l)));return u})),t.on("scrollToAnnotation",function(t){return function(e){var n,r,o,s,a,u;for(u=[],o=0,s=(a=t.anchors).length;o<s;o++)null!=(n=a[o]).highlights&&(n.annotation.$tag===e?(r=new i("scrolltorange",{bubbles:!0,cancelable:!0,detail:n.range}),t.element[0].dispatchEvent(r)?u.push(p(n.highlights[0])):u.push(void 0)):u.push(void 0));return u}}(this)),t.on("getDocumentInfo",function(t){return function(e){return t.getDocumentInfo().then((function(t){return e(null,t)})).catch((function(t){return e(t)}))}}(this)),t.on("setVisibleHighlights",function(t){return function(e){return t.setVisibleHighlights(e)}}(this))},e.prototype.destroy=function(){var t,n;for(t in r("#annotator-dynamic-style").remove(),this.selections.unsubscribe(),this.adder.remove(),this.element.find(".annotator-hl").each((function(){return r(this).contents().insertBefore(this),r(this).remove()})),this.element.data("annotator",null),n=this.plugins)n[t],this.plugins[t].destroy();return e.__super__.destroy.apply(this,arguments)},e.prototype.anchor=function(t){var e,n,i,o,s,l,c,f,p,d,m,v,b,_,w,x,E;for(w=this,_=this.element[0],i=[],n=[],o=[],null==t.target&&(t.target=[]),d=function(e){var n,r;return(null!=(r=e.selector)?r:[]).some((function(t){return"TextQuoteSelector"===t.type}))?(n={cache:w.anchoringCache,ignoreSelector:'[class^="annotator-"]'},w.anchoring.anchor(_,e.selector,n).then((function(n){return{annotation:t,target:e,range:n}})).catch((function(){return{annotation:t,target:e}}))):Promise.resolve({annotation:t,target:e})},s=function(t){return null==t.range?t:a((function(){var e,n;return n=g.sniff(t.range).normalize(_),e=u.highlightRange(n),r(e).data("annotation",t.annotation),t.highlights=e,t}))},x=function(e){var n,r,i,o,s,a,u;for(r=!1,i=!1,o=0,s=e.length;o<s;o++)if(null!=(n=e[o]).target.selector&&(r=!0,null!=n.range)){i=!0;break}return t.$orphan=r&&!i,w.anchors=w.anchors.concat(e),null!=(a=w.plugins.BucketBar)&&a.update(),null!=(u=w.plugins.CrossFrame)&&u.sync([t]),e},l=0,f=(m=w.anchors.splice(0,w.anchors.length)).length;l<f;l++)(e=m[l]).annotation===t?null!=e.range&&(v=e.target,y.call(t.target,v)>=0)?(i.push(e),n.push(e.target)):null!=e.highlights&&(o=o.concat(e.highlights),delete e.highlights,delete e.range):w.anchors.push(e);for(h((function(){return u.removeHighlights(o)})),c=0,p=(b=t.target).length;c<p;c++)E=b[c],y.call(n,E)<0&&(e=d(E).then(s),i.push(e));return Promise.all(i).then(x)},e.prototype.detach=function(t){var e,n,r,i,o,s,a,l,c;for(n=[],l=[],r=0,i=(o=this.anchors).length;r<i;r++)(e=o[r]).annotation===t?l.push(null!=(s=e.highlights)?s:[]):n.push(e);return this.anchors=n,l=(a=Array.prototype).concat.apply(a,l),h((c=this,function(){var t;return u.removeHighlights(l),null!=(t=c.plugins.BucketBar)?t.update():void 0}))},e.prototype.createAnnotation=function(t){var e,n,r,i,o,s,a,u,l,c,h;return null==t&&(t={}),u=this,s=this.element[0],r=null!=(i=this.selectedRanges)?i:[],this.selectedRanges=null,e=function(t){var e;return e={cache:u.anchoringCache,ignoreSelector:'[class^="annotator-"]'},u.anchoring.describe(s,t,e)},l=function(e){return t.document=e.metadata,t.uri=e.uri},c=function(e){var n,r,i,o;return n=e[0],i=e[1],o=n.uri,t.target=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],n.push({source:o,selector:r});return n}()},n=this.getDocumentInfo(),a=Promise.all(r.map(e)),n.then(l),(h=Promise.all([n,a]).then(c)).then((function(){return u.publish("beforeAnnotationCreated",[t])})),h.then((function(){return u.anchor(t)})),t.$highlight||null!=(o=this.crossframe)&&o.call("showSidebar"),t},e.prototype.createHighlight=function(){return this.createAnnotation({$highlight:!0})},e.prototype.createComment=function(){var t,e,n;return t={},n=this,e=function(e){return t.document=e.metadata,t.uri=e.uri,t.target=[{source:e.uri}]},this.getDocumentInfo().then(e).then((function(){return n.publish("beforeAnnotationCreated",[t])})),t},e.prototype.deleteAnnotation=function(t){var e,n,i,o;if(null!=t.highlights)for(n=0,i=(o=t.highlights).length;n<i;n++)null!=(e=o[n]).parentNode&&r(e).replaceWith(e.childNodes);return this.publish("annotationDeleted",[t]),t},e.prototype.showAnnotations=function(t){var e,n,r,i;return i=function(){var n,r,i;for(i=[],n=0,r=t.length;n<r;n++)e=t[n],i.push(e.$tag);return i}(),null!=(n=this.crossframe)&&n.call("showAnnotations",i),null!=(r=this.crossframe)?r.call("showSidebar"):void 0},e.prototype.toggleAnnotationSelection=function(t){var e,n,r;return r=function(){var n,r,i;for(i=[],n=0,r=t.length;n<r;n++)e=t[n],i.push(e.$tag);return i}(),null!=(n=this.crossframe)?n.call("toggleAnnotationSelection",r):void 0},e.prototype.updateAnnotations=function(t){var e,n,r;return r=function(){var n,r,i;for(i=[],n=0,r=t.length;n<r;n++)e=t[n],i.push(e.$tag);return i}(),null!=(n=this.crossframe)?n.call("updateAnnotations",r):void 0},e.prototype.focusAnnotations=function(t){var e,n,r;return r=function(){var n,r,i;for(i=[],n=0,r=t.length;n<r;n++)e=t[n],i.push(e.$tag);return i}(),null!=(n=this.crossframe)?n.call("focusAnnotations",r):void 0},e.prototype._onSelection=function(t){var e,n,i,o,s,a,u;if(a=document.getSelection(),i=f.isSelectionBackwards(a),n=f.selectionFocusRect(a))return this.selectedRanges=[t],r(".annotator-toolbar .h-icon-note").attr("title","New Annotation").removeClass("h-icon-note").addClass("h-icon-annotate"),o=(s=this.adderCtrl.target(n,i)).left,u=s.top,e=s.arrowDirection,this.adderCtrl.showAt(o,u,e);this._onClearSelection()},e.prototype._onClearSelection=function(){return this.adderCtrl.hide(),this.selectedRanges=[],r(".annotator-toolbar .h-icon-annotate").attr("title","New Page Note").removeClass("h-icon-annotate").addClass("h-icon-note")},e.prototype.selectAnnotations=function(t,e){return e?this.toggleAnnotationSelection(t):this.showAnnotations(t)},e.prototype.onElementClick=function(t){var e,n;if(!(null!=(e=this.selectedTargets)?e.length:void 0))return null!=(n=this.crossframe)?n.call("hideSidebar"):void 0},e.prototype.onElementTouchStart=function(t){var e,n;if(!(null!=(e=this.selectedTargets)?e.length:void 0))return null!=(n=this.crossframe)?n.call("hideSidebar"):void 0},e.prototype.onHighlightMouseover=function(t){var e,n,i;if(this.visibleHighlights)return e=r(t.currentTarget).data("annotation"),(n=null!=t.annotations?t.annotations:t.annotations=[]).push(e),t.target===t.currentTarget?setTimeout((i=this,function(){return i.focusAnnotations(n)})):void 0},e.prototype.onHighlightMouseout=function(t){if(this.visibleHighlights)return this.focusAnnotations([])},e.prototype.onHighlightClick=function(t){var e,n,i,o;if(this.visibleHighlights)return e=r(t.currentTarget).data("annotation"),(n=null!=t.annotations?t.annotations:t.annotations=[]).push(e),t.target===t.currentTarget?(i=t.metaKey||t.ctrlKey,setTimeout((o=this,function(){return o.selectAnnotations(n,i)}))):void 0},e.prototype.setVisibleHighlights=function(t){return this.toggleHighlightClass(t)},e.prototype.toggleHighlightClass=function(t){return t?this.element.addClass("annotator-highlights-always-on"):this.element.removeClass("annotator-highlights-always-on"),this.visibleHighlights=t},e}()},{"./adder":35,"./anchoring/html":36,"./anchoring/range":38,"./delegator":49,"./highlighter":54,"./range-util":67,"./selections":68,"./util/url":73,"custom-event":3,extend:23,jquery:"jquery",raf:30,"scroll-into-view":31}],53:[function(t,e,n){var r;r=t("jquery"),n.highlightRange=function(t,e){var n,i;return null==e&&(e="annotator-hl"),i=/^\s*$/,n=r("<hypothesis-highlight class='"+e+"'></hypothesis-highlight>"),r(t.textNodes()).filter((function(t){return!i.test(this.nodeValue)})).wrap(n).parent().toArray()},n.removeHighlights=function(t){var e,n,i,o;for(o=[],n=0,i=t.length;n<i;n++)null!=(e=t[n]).parentNode&&o.push(r(e).replaceWith(e.childNodes));return o},n.getBoundingClientRect=function(t){return t.map((function(t){return t.getBoundingClientRect()})).reduce((function(t,e){return{top:Math.min(t.top,e.top),left:Math.min(t.left,e.left),bottom:Math.max(t.bottom,e.bottom),right:Math.max(t.right,e.right)}}))}},{jquery:"jquery"}],54:[function(t,e,n){"use strict";var r,i=t("./dom-wrap-highlighter"),o=t("./overlay-highlighter"),s=t("../features"),a={};Object.keys(i).forEach((function(t){a[t]=function(){void 0===r&&(r=s.flagEnabled("overlay_highlighter"));for(var e=r?o[t]:i[t],n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return e.apply(null,a)}})),e.exports=a},{"../features":50,"./dom-wrap-highlighter":53,"./overlay-highlighter":55}],55:[function(t,e,n){"use strict";e.exports={highlightRange:function(){console.log("highlightRange not implemented")},removeHighlights:function(){console.log("removeHighlights not implemented")},getBoundingClientRect:function(){console.log("getBoundingClientRect not implemented")}}},{}],56:[function(t,e,n){var r,i,o={}.hasOwnProperty;r=t("jquery"),i=t("./guest"),e.exports=function(t){function e(t,n){var i,o,s,a,u,l,c;(null!=(a=n.services)?a[0]:void 0)&&((u=n.services[0]).onLoginRequest&&(u.onLoginRequestProvided=!0),u.onLogoutRequest&&(u.onLogoutRequestProvided=!0),u.onSignupRequest&&(u.onSignupRequestProvided=!0),u.onProfileRequest&&(u.onProfileRequestProvided=!0),u.onHelpRequest&&(u.onHelpRequestProvided=!0)),o="config="+encodeURIComponent(JSON.stringify(Object.assign({},n,{sidebarAppUrl:void 0,pluginClasses:void 0}))),l=n.sidebarAppUrl+"#"+o,i=r("<iframe></iframe>").attr("name","hyp_sidebar_frame").attr("allowfullscreen","").attr("seamless","").attr("src",l).attr("title","Hypothesis annotation viewer").addClass("h-sidebar-iframe"),s=null,n.externalContainerSelector&&(s=document.querySelector(n.externalContainerSelector)),s?this.externalFrame=r(s):(this.frame=r("<div></div>").css("display","none").addClass("annotator-frame annotator-outer"),"clean"===n.theme&&this.frame.addClass("annotator-frame--drop-shadow-enabled"),this.frame.appendTo(t)),e.__super__.constructor.apply(this,arguments),i.appendTo(this.frame||this.externalFrame),this.on("panelReady",(c=this,function(){var t;return null!=(t=c.frame)?t.css("display",""):void 0})),this.on("beforeAnnotationCreated",(function(t){if(!t.$highlight)return i[0].contentWindow.focus()}))}return function(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,i),e.prototype.destroy=function(){var t;return null!=(t=this.frame)&&t.remove(),e.__super__.destroy.apply(this,arguments)},e}()},{"./guest":52,jquery:"jquery"}],57:[function(t,e,n){"use strict";var r=t("jquery");t("focus-visible");var i=t("./config/index"),o=t("./guest"),s=t("./sidebar"),a=t("./pdf-sidebar"),u={BucketBar:t("./plugin/bucket-bar"),Toolbar:t("./plugin/toolbar"),PDF:t("./plugin/pdf"),Document:t("./plugin/document"),CrossFrame:t("./plugin/cross-frame")},l=document.querySelector('link[type="application/annotator+html"][rel="sidebar"]'),c=i(window);r.noConflict(!0)((function(){var t=window.PDFViewerApplication?a:s;c.hasOwnProperty("constructor")&&(t=c.constructor,delete c.constructor),c.subFrameIdentifier&&(void 0!==window.PDFViewerApplication&&(c.PDF={}),t=o,window.__hypothesis_frame=!0),c.pluginClasses=u;var e=new t(document.body,c);l.addEventListener("destroy",(function(){l.parentElement.removeChild(l),e.destroy()}))}))},{"./config/index":46,"./guest":52,"./pdf-sidebar":58,"./plugin/bucket-bar":61,"./plugin/cross-frame":62,"./plugin/document":63,"./plugin/pdf":65,"./plugin/toolbar":66,"./sidebar":70,"focus-visible":24,jquery:"jquery"}],58:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}var a=t("./sidebar"),u={TextSelection:{},PDF:{},BucketBar:{container:".annotator-frame",scrollables:["#viewerContainer"]},Toolbar:{container:".annotator-frame"}},l=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,o(e).call(this,t,Object.assign({},u,n)))}return s(e,a),e}();e.exports=l},{"./sidebar":70}],59:[function(t,e,n){"use strict";e.exports={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3}},{}],60:[function(t,e,n){var r,i={}.hasOwnProperty;r=t("./delegator"),e.exports=function(t){function e(t,n){e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,r),e.prototype.pluginInit=function(){},e}()},{"./delegator":49}],61:[function(t,e,n){var r,i,o,s,a,u,l,c,h,f=function(t,e){return function(){return t.apply(e,arguments)}},p={}.hasOwnProperty,d=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};l=t("raf"),r=t("jquery"),a=t("../plugin"),c=t("scroll-into-view"),u=t("../highlighter"),o=115+(i=6+16),h=function(t,e){var n,r;return n="up"===e?1:-1,r=t.reduce((function(t,e){var s,a,l;return(null!=(a=e.highlights)?a.length:void 0)?(l=t.start,r=t.next,s=u.getBoundingClientRect(e.highlights),1===n&&s.top>=o?t:-1===n&&s.top<=window.innerHeight-i?t:null==r?{start:s.top,next:e}:l*n<s.top*n?{start:s.top,next:e}:t):t}),{}).next,c(r.highlights[0])},e.exports=s=function(t){function e(t,n){var i;this.update=f(this.update,this),e.__super__.constructor.call(this,r(this.html),n),null!=this.options.container?r(this.options.container).append(this.element):r(t).append(this.element),this.highlighter=null!=(i=n.highlighter)?i:u}return function(t,e){for(var n in e)p.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,a),e.prototype.html='<div class="annotator-bucket-bar">\n</div>',e.prototype.options={gapSize:60,scrollables:["body"]},e.prototype.buckets=[],e.prototype.index=[],e.prototype.tabs=null,e.prototype.pluginInit=function(){var t,e,n,i,o,s;for(r(window).on("resize scroll",this.update),o=[],t=0,e=(i=null!=(n=this.options.scrollables)?n:[]).length;t<e;t++)s=i[t],o.push(r(s).on("resize scroll",this.update));return o},e.prototype.destroy=function(){var t,e,n,i,o,s;for(r(window).off("resize scroll",this.update),o=[],t=0,e=(i=null!=(n=this.options.scrollables)?n:[]).length;t<e;t++)s=i[t],o.push(r(s).off("resize scroll",this.update));return o},e.prototype._collate=function(t,e){var n,r,i;for(n=r=0,i=t.length-1;0<=i?r<=i:r>=i;n=0<=i?++r:--r){if(t[n]<e[n])return-1;if(t[n]>e[n])return 1}return 0},e.prototype.update=function(){var t;if(null==this._updatePending)return this._updatePending=l((t=this,function(){return delete t._updatePending,t._update()}))},e.prototype._update=function(){var t,e,n,s,a,u,l,c,f,p,g;for(t=[],n=[],c=this.annotator.anchors.reduce((g=this,function(e,r,s){var a,u,l,c;return(null!=(l=r.highlights)?l.length:void 0)?(c=(u=g.highlighter.getBoundingClientRect(r.highlights)).top,a=u.bottom-u.top,c<o?d.call(t,r)<0&&t.push(r):c>window.innerHeight-i?d.call(n,r)<0&&n.push(r):(e.push([c,1,r]),e.push([c+a,-1,r])),e):e}),[]),f=c.sort(this._collate).reduce(function(t){return function(e,n,r,i){var o,s,a,u,l,c,h,f,p,g,m,v,y,b,_,w;if(a=e.buckets,c=e.index,u=e.carry,w=n[0],l=n[1],o=n[2],l>0?(h=u.anchors.indexOf(o))<0?(u.anchors.unshift(o),u.counts.unshift(1)):u.counts[h]++:(h=u.anchors.indexOf(o),0==--u.counts[h]&&(u.anchors.splice(h,1),u.counts.splice(h,1))),0===c.length||r===i.length-1||0===u.anchors.length||w-c[c.length-1]>t.options.gapSize)a.push(u.anchors.slice()),c.push(w);else{for((null!=(y=a[a.length-2])?y.length:void 0)?(g=a[a.length-2],_=a.pop(),c.pop()):(g=a[a.length-1],_=[]),f=0,m=(b=u.anchors).length;f<m;f++)s=b[f],d.call(g,s)<0&&g.push(s);for(p=0,v=_.length;p<v;p++)s=_[p],d.call(g,s)<0&&g.push(s)}return{buckets:a,index:c,carry:u}}}(this),{buckets:[],index:[],carry:{anchors:[],counts:[],latest:0}}),this.buckets=f.buckets,this.index=f.index,this.buckets.unshift([],t,[]),this.index.unshift(0,o-1,o),this.buckets.push([],n,[]),this.index.push(window.innerHeight-i,window.innerHeight-i+1,window.innerHeight),l=0,a=0,u=(p=this.buckets).length;a<u;a++)e=p[a],l=Math.max(l,e.length);return s=this.element,this.tabs||(this.tabs=r([])),this.tabs.slice(this.buckets.length).remove(),this.tabs=this.tabs.slice(0,this.buckets.length),r.each(this.buckets.slice(this.tabs.length),function(t){return function(){var e;return e=r("<div/>").appendTo(s),t.tabs.push(e[0]),e.addClass("annotator-bucket-indicator").on("mousemove",(function(e){var n,i,o,s,a,u,l;for(i=t.tabs.index(e.currentTarget),u=[],o=0,s=(a=t.annotator.anchors).length;o<s;o++)n=a[o],l=d.call(t.buckets[i],n)>=0,u.push(r(n.highlights).toggleClass("annotator-hl-focused",l));return u})).on("mouseout",(function(e){var n,i,o,s,a,u;for(i=t.tabs.index(e.currentTarget),u=[],o=0,s=(a=t.buckets[i]).length;o<s;o++)n=a[o],u.push(r(n.highlights).removeClass("annotator-hl-focused"));return u})).on("click",(function(e){var n,r,i;return i=t.tabs.index(e.currentTarget),e.stopPropagation(),t.isUpper(i)?h(t.buckets[i],"up"):t.isLower(i)?h(t.buckets[i],"down"):(r=function(){var t,e,r,o;for(o=[],t=0,e=(r=this.buckets[i]).length;t<e;t++)n=r[t],o.push(n.annotation);return o}.call(t),t.annotator.selectAnnotations(r,e.ctrlKey||e.metaKey))}))}}(this)),this._buildTabs(this.tabs,this.buckets)},e.prototype._buildTabs=function(){return this.tabs.each((t=this,function(e,n){var o,s,a,u;if(n=r(n),u=1!==(s=null!=(o=t.buckets[e])?o.length:void 0)?"Show "+s+" annotations":s>0?"Show one annotation":void 0,n.attr("title",u),n.toggleClass("upper",t.isUpper(e)),n.toggleClass("lower",t.isLower(e)),a=t.isUpper(e)||t.isLower(e)?i:16,n.css({top:(t.index[e]+t.index[e+1])/2,marginTop:-a/2,display:s?"":"none"}),o)return n.html("<div class='label'>"+s+"</div>")}));var t},e.prototype.isUpper=function(t){return 1===t},e.prototype.isLower=function(t){return t===this.index.length-2},e}(),s.BUCKET_SIZE=16,s.BUCKET_NAV_SIZE=i,s.BUCKET_TOP_THRESHOLD=o},{"../highlighter":54,"../plugin":60,jquery:"jquery",raf:30,"scroll-into-view":31}],62:[function(t,e,n){var r,i,o,s,a,u,l,c=[].slice,h={}.hasOwnProperty;u=t("../plugin"),r=t("../annotation-sync"),i=t("../../shared/bridge"),o=t("../../shared/discovery"),a=t("../util/frame-util"),s=t("../frame-observer"),l=l=function(){var t,e,n,r,i,o;for(i=arguments[0],o={},t=0,r=(n=2<=arguments.length?c.call(arguments,1):[]).length;t<r;t++)e=n[t],i.hasOwnProperty(e)&&(o[e]=i[e]);return o},e.exports=function(t){function e(t,n){var h,f,p,d,g,m,v,y,b;e.__super__.constructor.apply(this,arguments),g=n.config,b=l(n,"server"),m=new o(window,b),d=new i,b=l(n,"on","emit"),p=new r(d,b),y=new s(t),v=new Map,this.pluginInit=function(){var t;return t=function(t,e,n){return d.createChannel(t,e,n)},m.startDiscovery(t),y.observe(f,h)},this.destroy=function(){return u.prototype.destroy.apply(this,arguments),d.destroy(),m.stopDiscovery(),y.disconnect()},this.sync=function(t,e){return p.sync(t,e)},this.on=function(t,e){return d.on(t,e)},this.call=function(){var t,e;return e=arguments[0],t=2<=arguments.length?c.call(arguments,1):[],d.call.apply(d,[e].concat(c.call(t)))},this.onConnect=function(t){return d.onConnect(t)},f=function(t){var e;if(!a.hasHypothesis(t))return e=g.clientUrl,a.isLoaded(t,(function(){var n,r;return r=m.generateToken(),v.set(t,r),n=Object.assign({},g,{subFrameIdentifier:r}),a.injectHypothesis(t,e,n)}))},h=function(t){return d.call("destroyFrame",v.get(t)),v.delete(t)}}return function(t,e){for(var n in e)h.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,u),e}()},{"../../shared/bridge":75,"../../shared/discovery":76,"../annotation-sync":44,"../frame-observer":51,"../plugin":60,"../util/frame-util":71}],63:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}var u=t("document-base-uri"),l=t("../plugin"),c=t("../util/url").normalizeURI,h=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=o(this,s(e).call(this,t,n))).events={beforeAnnotationCreated:"beforeAnnotationCreated"},r}return a(e,l),function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(e,[{key:"pluginInit",value:function(){this.baseURI=this.options.baseURI||u,this.document=this.options.document||document,this.normalizeURI=this.options.normalizeURI||c,this.getDocumentMetadata()}},{key:"uri",value:function(){var t=decodeURIComponent(this._getDocumentHref()),e=!0,n=!1,r=void 0;try{for(var i,o=this.metadata.link[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value;"canonical"===s.rel&&(t=s.href)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return t}},{key:"uris",value:function(){var t={},e=!0,n=!1,r=void 0;try{for(var i,o=this.metadata.link[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value;s.href&&(t[s.href]=!0)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return Object.keys(t)}},{key:"beforeAnnotationCreated",value:function(t){t.document=this.metadata}},{key:"getDocumentMetadata",value:function(){return this.metadata={},this._getHighwire(),this._getDublinCore(),this._getFacebook(),this._getEprints(),this._getPrism(),this._getTwitter(),this._getFavicon(),this._getTitle(),this._getLinks(),this.metadata}},{key:"_getHighwire",value:function(){this.metadata.highwire=this._getMetaTags("citation","name","_")}},{key:"_getFacebook",value:function(){this.metadata.facebook=this._getMetaTags("og","property",":")}},{key:"_getTwitter",value:function(){this.metadata.twitter=this._getMetaTags("twitter","name",":")}},{key:"_getDublinCore",value:function(){this.metadata.dc=this._getMetaTags("dc","name",".")}},{key:"_getPrism",value:function(){this.metadata.prism=this._getMetaTags("prism","name",".")}},{key:"_getEprints",value:function(){this.metadata.eprints=this._getMetaTags("eprints","name",".")}},{key:"_getMetaTags",value:function(t,e,n){for(var r={},i=0,o=Array.from(this.document.querySelectorAll("meta"));i<o.length;i++){var s=o[i],a=s.getAttribute(e),u=s.content;if(a){var l=a.match(RegExp("^".concat(t).concat(n,"(.+)$"),"i"));if(l){var c=l[1];r[c]?r[c].push(u):r[c]=[u]}}}return r}},{key:"_getTitle",value:function(){this.metadata.highwire.title?this.metadata.title=this.metadata.highwire.title[0]:this.metadata.eprints.title?this.metadata.title=this.metadata.eprints.title[0]:this.metadata.prism.title?this.metadata.title=this.metadata.prism.title[0]:this.metadata.facebook.title?this.metadata.title=this.metadata.facebook.title[0]:this.metadata.twitter.title?this.metadata.title=this.metadata.twitter.title[0]:this.metadata.dc.title?this.metadata.title=this.metadata.dc.title[0]:this.metadata.title=this.document.title}},{key:"_getLinks",value:function(){this.metadata.link=[{href:this._getDocumentHref()}];for(var t=0,e=Array.from(this.document.querySelectorAll("link"));t<e.length;t++){var n=e[t];if(["alternate","canonical","bookmark","shortlink"].includes(n.rel)){if("alternate"===n.rel){if(n.type&&n.type.match(/^application\/(rss|atom)\+xml/))continue;if(n.hreflang)continue}try{var r=this._absoluteUrl(n.href);this.metadata.link.push({href:r,rel:n.rel,type:n.type})}catch(t){}}}for(var i=0,o=Object.keys(this.metadata.highwire);i<o.length;i++){var s=o[i],a=this.metadata.highwire[s];if("pdf_url"===s){var u=!0,l=!1,c=void 0;try{for(var h,f=a[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var p=h.value;try{this.metadata.link.push({href:this._absoluteUrl(p),type:"application/pdf"})}catch(t){}}}catch(t){l=!0,c=t}finally{try{u||null==f.return||f.return()}finally{if(l)throw c}}}if("doi"===s){var d=!0,g=!1,m=void 0;try{for(var v,y=a[Symbol.iterator]();!(d=(v=y.next()).done);d=!0){var b=v.value;"doi:"!==b.slice(0,4)&&(b="doi:".concat(b)),this.metadata.link.push({href:b})}}catch(t){g=!0,m=t}finally{try{d||null==y.return||y.return()}finally{if(g)throw m}}}}for(var _=0,w=Object.keys(this.metadata.dc);_<w.length;_++){var x=w[_],E=this.metadata.dc[x];if("identifier"===x){var T=!0,C=!1,S=void 0;try{for(var O,N=E[Symbol.iterator]();!(T=(O=N.next()).done);T=!0){var A=O.value;"doi:"===A.slice(0,4)&&this.metadata.link.push({href:A})}}catch(t){C=!0,S=t}finally{try{T||null==N.return||N.return()}finally{if(C)throw S}}}}var R=this.metadata.dc["relation.ispartof"],P=this.metadata.dc.identifier;if(R&&P){var k=R[R.length-1],D=P[P.length-1],M="urn:x-dc:"+encodeURIComponent(k)+"/"+encodeURIComponent(D);this.metadata.link.push({href:M}),this.metadata.documentFingerprint=M}}},{key:"_getFavicon",value:function(){for(var t=0,e=Array.from(this.document.querySelectorAll("link"));t<e.length;t++){var n=e[t];if(["shortcut icon","icon"].includes(n.rel))try{this.metadata.favicon=this._absoluteUrl(n.href)}catch(t){}}}},{key:"_absoluteUrl",value:function(t){return this.normalizeURI(t,this.baseURI)}},{key:"_getDocumentHref",value:function(){var t=this.document.location.href,e=["http:","https:","file:"],n=new URL(t).protocol;return e.includes(n)?t:this.baseURI&&e.includes(new URL(this.baseURI).protocol)?this.baseURI:t}}]),e}();e.exports=h},{"../plugin":60,"../util/url":73,"document-base-uri":5}],64:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=t("../util/url").normalizeURI,o=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._loaded=new Promise((function(t){var n=function n(){window.removeEventListener("documentload",n),window.removeEventListener("documentloaded",n),t(e)};e.downloadComplete?t(e):(window.addEventListener("documentload",n),window.addEventListener("documentloaded",n))}))}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(t,[{key:"getUri",value:function(){return this._loaded.then((function(t){var e=a(t);return e||(e=s(t.pdfDocument.fingerprint)),e}))}},{key:"getMetadata",value:function(){return this._loaded.then((function(t){var e=document.title;t.metadata&&t.metadata.has("dc:title")&&"Untitled"!==t.metadata.get("dc:title")?e=t.metadata.get("dc:title"):t.documentInfo&&t.documentInfo.Title&&(e=t.documentInfo.Title);var n=[{href:s(t.pdfDocument.fingerprint)}],r=a(t);return r&&n.push({href:r}),{title:e,link:n,documentFingerprint:t.pdfDocument.fingerprint}}))}}]),t}();function s(t){return"urn:x-pdf:"+String(t)}function a(t){var e=i(t.url);return 0!==e.indexOf("file://")?e:null}e.exports=o},{"../util/url":73}],65:[function(t,e,n){var r,i,o={}.hasOwnProperty,s=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};r=t("../plugin"),i=t("../pdfjs-rendering-states"),e.exports=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,r),n.prototype.documentLoaded=null,n.prototype.observer=null,n.prototype.pdfViewer=null,n.prototype.pluginInit=function(){var e,n;return this.annotator.anchoring=t("../anchoring/pdf"),e=t("./pdf-metadata"),this.pdfViewer=PDFViewerApplication.pdfViewer,this.pdfViewer.viewer.classList.add("has-transparent-text-layer"),this.pdfMetadata=new e(PDFViewerApplication),this.observer=new MutationObserver((n=this,function(t){return n._update()})),this.observer.observe(this.pdfViewer.viewer,{attributes:!0,attributeFilter:["data-loaded"],childList:!0,subtree:!0})},n.prototype.destroy=function(){return this.pdfViewer.viewer.classList.remove("has-transparent-text-layer"),this.observer.disconnect()},n.prototype.uri=function(){return this.pdfMetadata.getUri()},n.prototype.getMetadata=function(){return this.pdfMetadata.getMetadata()},n.prototype._update=function(){var t,e,n,r,o,a,u,l,c,h,f,p,d,g,m,v,y,b,_,w,x,E,T,C;for(n=this.annotator,T=[],g=o=0,y=(m=this.pdfViewer).pagesCount;0<=y?o<y:o>y;g=0<=y?++o:--o)if(null!=(b=(d=m.getPageView(g)).textLayer)?b.renderingDone:void 0)switch(v=(null!=(_=d.div)?_:d.el).getElementsByClassName("annotator-placeholder")[0],d.renderingState){case i.INITIAL:d.textLayer=null;break;case i.FINISHED:null!=v&&v.parentNode.removeChild(v)}for(u=0,h=(w=n.anchors).length;u<h;u++)if(null!=(t=w[u]).highlights&&(x=t.annotation,!(s.call(T,x)>=0)))for(a=l=0,f=(E=t.highlights).length;l<f;a=++l)if(r=E[a],!document.body.contains(r)){t.highlights.splice(a,1),delete t.range,T.push(t.annotation);break}for(C=[],c=0,p=T.length;c<p;c++)e=T[c],C.push(n.anchor(e));return C},n}()},{"../anchoring/pdf":37,"../pdfjs-rendering-states":59,"../plugin":60,"./pdf-metadata":64}],66:[function(t,e,n){var r,i,o,s={}.hasOwnProperty;i=t("../plugin"),r=t("jquery"),o=function(t){var e;return e=r("<button></button>").attr("href","").attr("title",t.title).attr("name",t.name).attr("aria-pressed",t.ariaPressed).on(t.on).addClass("annotator-frame-button").addClass(t.class),r("<li></li>").append(e)[0]},e.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,i),e.prototype.events={setVisibleHighlights:"onSetVisibleHighlights"},e.prototype.html='<div class="annotator-toolbar"></div>',e.prototype.pluginInit=function(){var t,e,n,i,s,a,u;return this.annotator.toolbar=this.toolbar=r(this.html),null!=this.options.container?r(this.options.container).append(this.toolbar):r(this.element).append(this.toolbar),e="always"===(t=this.annotator.options).showHighlights,n=t.openSidebar,s=[{title:"Close Sidebar",class:"annotator-frame-button--sidebar_close h-icon-close",name:"sidebar-close",on:{click:(u=this,function(t){return t.preventDefault(),t.stopPropagation(),u.annotator.hide(),u.toolbar.find("[name=sidebar-close]").hide()})}},{title:"Toggle or Resize Sidebar",ariaPressed:n,class:"annotator-frame-button--sidebar_toggle h-icon-chevron-left",name:"sidebar-toggle",on:{click:function(t){return function(e){return e.preventDefault(),e.stopPropagation(),t.annotator.frame.hasClass("annotator-collapsed")?(t.annotator.show(),e.target.setAttribute("aria-pressed",!0)):(t.annotator.hide(),e.target.setAttribute("aria-pressed",!1))}}(this)}},{title:"Toggle Highlights Visibility",class:e?"h-icon-visibility":"h-icon-visibility-off",name:"highlight-visibility",ariaPressed:e,on:{click:function(t){return function(e){var n;return e.preventDefault(),e.stopPropagation(),n=!t.annotator.visibleHighlights,t.annotator.setAllVisibleHighlights(n)}}(this)}},{title:"New Page Note",class:"h-icon-note",name:"insert-comment",on:{click:function(t){return function(e){return e.preventDefault(),e.stopPropagation(),t.annotator.createAnnotation(),t.annotator.show()}}(this)}}],this.buttons=r(function(){var t,e,n;for(n=[],t=0,e=s.length;t<e;t++)i=s[t],n.push(o(i));return n}()),a=r("<ul></ul>"),this.buttons.appendTo(a),this.toolbar.append(a),this.toolbar.on("mouseup","a",(function(t){return r(t.target).blur()}))},e.prototype.onSetVisibleHighlights=function(t){return t?this.element.find("[name=highlight-visibility]").removeClass("h-icon-visibility-off").addClass("h-icon-visibility").attr("aria-pressed","true"):this.element.find("[name=highlight-visibility]").removeClass("h-icon-visibility").addClass("h-icon-visibility-off").attr("aria-pressed","false")},e.prototype.disableMinimizeBtn=function(){return r("[name=sidebar-toggle]").remove()},e.prototype.disableHighlightsBtn=function(){return r("[name=highlight-visibility]").remove()},e.prototype.disableNewNoteBtn=function(){return r("[name=insert-comment]").remove()},e.prototype.disableCloseBtn=function(){return r("[name=sidebar-close]").remove()},e.prototype.getWidth=function(){return parseInt(window.getComputedStyle(this.toolbar[0]).width)},e.prototype.hideCloseBtn=function(){return r("[name=sidebar-close]").hide()},e.prototype.showCloseBtn=function(){return r("[name=sidebar-close]").show()},e.prototype.showCollapseSidebarBtn=function(){return r("[name=sidebar-toggle]").removeClass("h-icon-chevron-left").addClass("h-icon-chevron-right")},e.prototype.showExpandSidebarBtn=function(){return r("[name=sidebar-toggle]").removeClass("h-icon-chevron-right").addClass("h-icon-chevron-left")},e}()},{"../plugin":60,jquery:"jquery"}],67:[function(t,e,n){"use strict";function r(t){return t.focusNode===t.anchorNode?t.focusOffset<t.anchorOffset:t.getRangeAt(0).startContainer===t.focusNode}function i(t,e){if(e===t.startContainer||e===t.endContainer)return!0;var n=e.ownerDocument.createRange();n.selectNode(e);var r=t.compareBoundaryPoints(Range.START_TO_START,n)<=0,i=t.compareBoundaryPoints(Range.END_TO_END,n)>=0;return n.detach(),r&&i}function o(t){var e=/^\s*$/,n=[];!function(t,e){for(var n,r=t.commonAncestorContainer,o=r.ownerDocument.createNodeIterator(r,NodeFilter.SHOW_ALL,null,!1);n=o.nextNode();)i(t,n)&&e(n)}(t,(function(t){t.nodeType!==Node.TEXT_NODE||t.textContent.match(e)||n.push(t)}));var r=[];return n.forEach((function(e){var n=e.ownerDocument.createRange();if(n.selectNodeContents(e),e===t.startContainer&&n.setStart(e,t.startOffset),e===t.endContainer&&n.setEnd(e,t.endOffset),!n.collapsed){var i=Array.from(n.getClientRects());n.detach(),r=r.concat(i)}})),r}e.exports={getTextBoundingBoxes:o,isNodeInRange:i,isSelectionBackwards:r,selectionFocusRect:function(t){if(t.isCollapsed)return null;var e=o(t.getRangeAt(0));return 0===e.length?null:r(t)?e[0]:e[e.length-1]}}},{}],68:[function(t,e,n){"use strict";var r=t("./util/observable");e.exports=function(t){var e,n=r.listen(t,["mousedown","mouseup","selectionchange"]).filter((function(t){return"mousedown"===t.type||"mouseup"===t.type?(e="mousedown"===t.type,!1):!e}));return r.merge([r.buffer(10,r.listen(t,["mouseup"])),r.buffer(100,n),r.delay(0,r.Observable.of({}))]).map((function(){return function(t){var e=t.getSelection();return!e.rangeCount||e.getRangeAt(0).collapsed?null:e.getRangeAt(0)}(t)}))}},{"./util/observable":72}],69:[function(t,e,n){"use strict";var r="data-hypothesis-trigger";e.exports=function(t,e){var n=t.querySelectorAll("["+r+"]");function i(t){e(),t.stopPropagation()}Array.from(n).forEach((function(t){t.addEventListener("click",i)}))}},{}],70:[function(t,e,n){var r,i,o,s,a,u,l,c=function(t,e){return function(){return t.apply(e,arguments)}},h={}.hasOwnProperty;t("extend"),u=t("raf"),r=t("hammerjs"),i=t("./host"),o=t("./annotation-counts"),l=t("./sidebar-trigger"),s=t("../shared/bridge-events"),a=t("./features"),e.exports=function(t){function e(t,n){var r,i,o;this.onSwipe=c(this.onSwipe,this),this.onPan=c(this.onPan,this),this._notifyOfLayoutChange=c(this._notifyOfLayoutChange,this),("clean"===n.theme||n.externalContainerSelector)&&delete n.pluginClasses.BucketBar,n.externalContainerSelector&&delete n.pluginClasses.Toolbar,e.__super__.constructor.apply(this,arguments),this.hide(),(n.openSidebar||n.annotations||n.query||n.group)&&this.on("panelReady",(o=this,function(){return o.show()})),null!=this.plugins.BucketBar&&this.plugins.BucketBar.element.on("click",function(t){return function(e){return t.show()}}(this)),null!=this.plugins.Toolbar&&(this.toolbarWidth=this.plugins.Toolbar.getWidth(),"clean"===n.theme?(this.plugins.Toolbar.disableMinimizeBtn(),this.plugins.Toolbar.disableHighlightsBtn(),this.plugins.Toolbar.disableNewNoteBtn()):this.plugins.Toolbar.disableCloseBtn(),this._setupGestures()),(i=null!=(r=n.services)?r[0]:void 0)&&(this.onLoginRequest=i.onLoginRequest,this.onLogoutRequest=i.onLogoutRequest,this.onSignupRequest=i.onSignupRequest,this.onProfileRequest=i.onProfileRequest,this.onHelpRequest=i.onHelpRequest),this.onLayoutChange=n.onLayoutChange,this._notifyOfLayoutChange(!1),this._setupSidebarEvents()}return function(t,e){for(var n in e)h.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,i),e.prototype.options={Document:{},TextSelection:{},BucketBar:{container:".annotator-frame"},Toolbar:{container:".annotator-frame"}},e.prototype.renderFrame=null,e.prototype.gestureState=null,e.prototype._setupSidebarEvents=function(){var t;return o(document.body,this.crossframe),l(document.body,(t=this,function(){return t.show()})),a.init(this.crossframe),this.crossframe.on("showSidebar",function(t){return function(){return t.show()}}(this)),this.crossframe.on("hideSidebar",function(t){return function(){return t.hide()}}(this)),this.crossframe.on(s.LOGIN_REQUESTED,function(t){return function(){if(t.onLoginRequest)return t.onLoginRequest()}}(this)),this.crossframe.on(s.LOGOUT_REQUESTED,function(t){return function(){if(t.onLogoutRequest)return t.onLogoutRequest()}}(this)),this.crossframe.on(s.SIGNUP_REQUESTED,function(t){return function(){if(t.onSignupRequest)return t.onSignupRequest()}}(this)),this.crossframe.on(s.PROFILE_REQUESTED,function(t){return function(){if(t.onProfileRequest)return t.onProfileRequest()}}(this)),this.crossframe.on(s.HELP_REQUESTED,function(t){return function(){if(t.onHelpRequest)return t.onHelpRequest()}}(this)),this},e.prototype._setupGestures=function(){var t,e,n;if((t=this.toolbar.find("[name=sidebar-toggle]"))[0])return t.on("touchmove",(function(t){return t.preventDefault()})),n=(e=new r.Manager(t[0]).on("panstart panend panleft panright",this.onPan).on("swipeleft swiperight",this.onSwipe)).add(new r.Pan({direction:r.DIRECTION_HORIZONTAL})),e.add(new r.Swipe({direction:r.DIRECTION_HORIZONTAL})).recognizeWith(n),this._initializeGestureState(),this},e.prototype._initializeGestureState=function(){return this.gestureState={initial:null,final:null}},e.prototype._updateLayout=function(){var t;if(!this.renderFrame)return this.renderFrame=u((t=this,function(){var e,n;if(t.renderFrame=null,t.gestureState.final!==t.gestureState.initial)return n=-(e=t.gestureState.final),t.frame.css("margin-left",e+"px"),n>=280&&t.frame.css("width",n+"px"),t._notifyOfLayoutChange()}))},e.prototype._notifyOfLayoutChange=function(t){var e,n,r,i,o,s,a,u;if(a=this.toolbarWidth||0,this.onLayoutChange)return s=(r=this.frame||this.externalFrame)[0].getBoundingClientRect(),e=window.getComputedStyle(r[0]),u=parseInt(e.width),o=parseInt(e.marginLeft),i=a,null!=t?t&&(i+=u):i+=o<280?-o:u,n=i>a,this.onLayoutChange({expanded:n,width:n?i:a,height:s.height})},e.prototype.onPan=function(t){var e,n;if(this.frame)switch(t.type){case"panstart":return this._initializeGestureState(),this.frame.addClass("annotator-no-transition"),this.frame.css("pointer-events","none"),this.gestureState.initial=parseInt(getComputedStyle(this.frame[0]).marginLeft);case"panend":return this.frame.removeClass("annotator-no-transition"),this.frame.css("pointer-events",""),this.gestureState.final<=-280?this.show():this.hide(),this._initializeGestureState();case"panleft":case"panright":if(null==this.gestureState.initial)return;return n=this.gestureState.initial,e=t.deltaX,this.gestureState.final=Math.min(Math.round(n+e),0),this._updateLayout()}},e.prototype.onSwipe=function(t){switch(t.type){case"swipeleft":return this.show();case"swiperight":return this.hide()}},e.prototype.show=function(){return this.crossframe.call("sidebarOpened"),this.frame&&(this.frame.css({"margin-left":-1*this.frame.width()+"px"}),this.frame.removeClass("annotator-collapsed")),null!=this.plugins.Toolbar&&(this.plugins.Toolbar.showCollapseSidebarBtn(),this.plugins.Toolbar.showCloseBtn()),"whenSidebarOpen"===this.options.showHighlights&&this.setVisibleHighlights(!0),this._notifyOfLayoutChange(!0)},e.prototype.hide=function(){return this.frame&&(this.frame.css({"margin-left":""}),this.frame.addClass("annotator-collapsed")),null!=this.plugins.Toolbar&&(this.plugins.Toolbar.hideCloseBtn(),this.plugins.Toolbar.showExpandSidebarBtn()),"whenSidebarOpen"===this.options.showHighlights&&this.setVisibleHighlights(!1),this._notifyOfLayoutChange(!1)},e.prototype.isOpen=function(){return!this.frame||!this.frame.hasClass("annotator-collapsed")},e.prototype.setAllVisibleHighlights=function(t){return this.crossframe.call("setVisibleHighlights",t),this.publish("setVisibleHighlights",t)},e}()},{"../shared/bridge-events":74,"./annotation-counts":43,"./features":50,"./host":56,"./sidebar-trigger":69,extend:23,hammerjs:25,raf:30}],71:[function(t,e,n){"use strict";function r(t){var e=!t.classList.contains("h-sidebar-iframe"),n=t.hasAttribute("enable-annotation");return e&&n}e.exports={findFrames:function(t){return Array.from(t.getElementsByTagName("iframe")).filter(r)},hasHypothesis:function(t){return!0===t.contentWindow.__hypothesis_frame},injectHypothesis:function(t,e,n){var r=document.createElement("script");r.className="js-hypothesis-config",r.type="application/json",r.innerText=JSON.stringify(n);var i=e,o=document.createElement("script");o.className="js-hypothesis-embed",o.async=!0,o.src=i,t.contentDocument.body.appendChild(r),t.contentDocument.body.appendChild(o)},isAccessible:function(t){try{return!!t.contentDocument}catch(t){return!1}},isLoaded:function(t,e){"complete"!==t.contentDocument.readyState?t.addEventListener("load",(function(){e()})):e()},isDocumentReady:function(t,e){"loading"===t.contentDocument.readyState?t.contentDocument.addEventListener("DOMContentLoaded",(function(){e()})):e()}}},{}],72:[function(t,e,n){"use strict";var r=t("zen-observable");e.exports={buffer:function(t,e){return new r((function(n){var r,i;function o(){n.next(r)}var s=e.subscribe({next:function(e){r=e,clearTimeout(i),i=setTimeout(o,t)}});return function(){s.unsubscribe(),clearTimeout(i)}}))},delay:function(t,e){return new r((function(n){var r=[],i=e.subscribe({next:function(e){var i=setTimeout((function(){r=r.filter((function(t){return t!==i})),n.next(e)}),t);r.push(i)}});return function(){r.forEach(clearTimeout),i.unsubscribe()}}))},drop:function(t,e){var n=0;return t.filter((function(){return++n>e}))},listen:function(t,e){return new r((function(n){var r=function(t){n.next(t)};return e.forEach((function(e){t.addEventListener(e,r)})),function(){e.forEach((function(e){t.removeEventListener(e,r)}))}}))},merge:function(t){return new r((function(e){var n=t.map((function(t){return t.subscribe({next:function(t){e.next(t)}})}));return function(){n.forEach((function(t){t.unsubscribe()}))}}))},Observable:r}},{"zen-observable":32}],73:[function(t,e,n){"use strict";var r=t("document-base-uri");e.exports={normalizeURI:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return new URL(t,e).href.toString().replace(/#.*/,"")}}},{"document-base-uri":5}],74:[function(t,e,n){"use strict";e.exports={FEATURE_FLAGS_UPDATED:"featureFlagsUpdated",HELP_REQUESTED:"helpRequested",LOGIN_REQUESTED:"loginRequested",LOGOUT_REQUESTED:"logoutRequested",PROFILE_REQUESTED:"profileRequested",PUBLIC_ANNOTATION_COUNT_CHANGED:"publicAnnotationCountChanged",SIGNUP_REQUESTED:"signupRequested"}},{}],75:[function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=t("extend"),s=t("./frame-rpc"),a=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.links=[],this.channelListeners={},this.onConnectListeners=[]}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,[{key:"destroy",value:function(){Array.from(this.links).map((function(t){return t.channel.destroy()}))}},{key:"createChannel",value:function(t,e,n){var r=this,i=null,a=!1,u=function(){a||(a=!0,Array.from(r.onConnectListeners).forEach((function(e){return e.call(null,i,t)})))},l=o({connect:function(t,e){t===n&&(e(),u())}},this.channelListeners);return(i=new s(window,t,e,l)).call("connect",n,u),this.links.push({channel:i,window:t}),i}},{key:"call",value:function(t){for(var e,n=this,i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];"function"==typeof o[o.length-1]&&(e=o[o.length-1],o=o.slice(0,-1));var a=function(t){return function(e){throw t.destroy(),n.links=Array.from(n.links).filter((function(e){return e.channel!==t})).map((function(t){return t})),e}},u=this.links.map((function(e){return new Promise((function(n,i){var s=setTimeout((function(){return n(null)}),1e3);try{var a;return(a=e.channel).call.apply(a,[t].concat(r(Array.from(o)),[function(t,e){return clearTimeout(s),t?i(t):n(e)}]))}catch(t){return i(t)}})).catch(a(e.channel))})),l=Promise.all(u);return e&&(l=l.then((function(t){return e(null,t)})).catch((function(t){return e(t)}))),l}},{key:"on",value:function(t,e){if(this.channelListeners[t])throw new Error("Listener '".concat(t,"' already bound in Bridge"));return this.channelListeners[t]=e,this}},{key:"off",value:function(t){return delete this.channelListeners[t],this}},{key:"onConnect",value:function(t){return this.onConnectListeners.push(t),this}}]),t}();e.exports=a},{"./frame-rpc":77,extend:23}],76:[function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.target=e,this.server=!1,this.origin="*",this.requestInProgress=!1,this.onDiscovery=null,void 0!==n.server&&(this.server=n.server),void 0!==n.origin&&(this.origin=n.origin),this._onMessage=this._onMessage.bind(this)}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,[{key:"startDiscovery",value:function(t){if(this.onDiscovery)throw new Error("Discovery is already in progress. Call stopDiscovery() first");this.onDiscovery=t,this.target.addEventListener("message",this._onMessage,!1),this._beacon()}},{key:"stopDiscovery",value:function(){this.onDiscovery=null,this.target.removeEventListener("message",this._onMessage)}},{key:"_beacon",value:function(){var t;t=this.server?"__cross_frame_dhcp_offer":"__cross_frame_dhcp_discovery";for(var e=[this.target.top];e.length>0;){var n=e.shift();n!==this.target&&n.postMessage(t,this.origin);for(var r=0;r<n.frames.length;r++)e.push(n.frames[r])}}},{key:"_onMessage",value:function(t){var e=t.source,n=t.data,i=t.origin;("null"===i||i.match("moz-extension:")||"moz-extension:"===window.location.protocol)&&(i="*");var o="string"==typeof n&&n.match(/^__cross_frame_dhcp_(discovery|offer|request|ack)(?::(\d+))?$/);if(o){var s=r(o,3),a=s[1],u=s[2],l=this._processMessage(a,u,i),c=l.reply,h=l.discovered,f=l.token;c&&e.postMessage("__cross_frame_dhcp_"+c,i),h&&this.onDiscovery.call(null,e,i,f)}}},{key:"_processMessage",value:function(t,e,n){var r=null,i=!1;if(this.server){if("discovery"===t)r="offer";else if("request"===t)e=this.generateToken(),r="ack:".concat(e),i=!0;else if("offer"===t||"ack"===t)throw new Error("A second Discovery server has been detected at ".concat(n,".\n This is unsupported and will cause unexpected behaviour."))}else"offer"===t?this.requestInProgress||(this.requestInProgress=!0,r="request"):"ack"===t&&(this.requestInProgress=!1,i=!0);return{reply:r,discovered:i,token:e}}},{key:"generateToken",value:function(){return Math.random().toString().replace(/\D/g,"")}}]),t}();e.exports=o},{}],77:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e,n,o){if(!(this instanceof i))return new i(t,e,n,o);var s=this;if(this.src=t,this.dst=e,"*"===n)this.origin="*";else{var a=new URL(n);this.origin=a.protocol+"//"+a.host}this._sequence=0,this._callbacks={},this._onmessage=function(t){s._destroyed||s.dst===t.source&&("*"!==s.origin&&t.origin!==s.origin||t.data&&"object"===r(t.data)&&"frame-rpc"===t.data.protocol&&Array.isArray(t.data.arguments)&&s._handle(t.data))},this.src.addEventListener("message",this._onmessage),this._methods=("function"==typeof o?o(this):o)||{}}e.exports=i,i.prototype.destroy=function(){this._destroyed=!0,this.src.removeEventListener("message",this._onmessage)},i.prototype.call=function(t){var e=[].slice.call(arguments,1);return this.apply(t,e)},i.prototype.apply=function(t,e){if(!this._destroyed){var n=this._sequence++;"function"==typeof e[e.length-1]&&(this._callbacks[n]=e[e.length-1],e=e.slice(0,-1)),this.dst.postMessage({protocol:"frame-rpc",version:"1.0.0",sequence:n,method:t,arguments:e},this.origin)}},i.prototype._handle=function(t){var e=this;if(!e._destroyed)if(t.hasOwnProperty("method")){if(!this._methods.hasOwnProperty(t.method))return;var n=t.arguments.concat((function(){e.dst.postMessage({protocol:"frame-rpc",version:"1.0.0",response:t.sequence,arguments:[].slice.call(arguments)},e.origin)}));this._methods[t.method].apply(this._methods,n)}else if(t.hasOwnProperty("response")){var r=this._callbacks[t.response];delete this._callbacks[t.response],r&&r.apply(null,t.arguments)}}},{}],78:[function(t,e,n){"use strict";function r(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}e.exports={jsonConfigsFrom:function(t){for(var e={},n=t.querySelectorAll("script.js-hypothesis-config"),i=0;i<n.length;i++){var o=void 0;try{o=JSON.parse(n[i].textContent)}catch(t){console.warn("Could not parse settings from js-hypothesis-config tags",t),o={}}r(e,o)}return e}}},{}],79:[function(t,e,n){"use strict";var r={};function i(){for(var t,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var o=n.join();o in r||((t=console).warn.apply(t,n),r[o]=!0)}i.reset=function(){r={}},e.exports=i},{}]},{},[57]);
//# sourceMappingURL=annotator.bundle.js.map